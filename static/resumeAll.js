/*! jQuery UI - v1.12.1 - 2019-11-26
* http://jqueryui.com
* Includes: widget.js, data.js, disable-selection.js, scroll-parent.js, widgets/draggable.js, widgets/droppable.js, widgets/resizable.js, widgets/selectable.js, widgets/sortable.js, widgets/mouse.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e=0,i=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},h=e.split(".")[0];e=e.split(".")[1];var l=h+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][l.toLowerCase()]=function(e){return!!t.data(e,l)},t[h]=t[h]||{},n=t[h][e],o=t[h][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:h,widgetName:e,widgetFullName:l}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var s,n,o=i.call(arguments,1),a=0,r=o.length;r>a;a++)for(s in o[a])n=o[a][s],o[a].hasOwnProperty(s)&&void 0!==n&&(e[s]=t.isPlainObject(n)?t.isPlainObject(e[s])?t.widget.extend({},e[s],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,s){var n=s.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=i.call(arguments,1),h=this;return a?this.length||"instance"!==o?this.each(function(){var i,s=t.data(this,n);return"instance"===o?(h=s,!1):s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,r),i!==s&&void 0!==i?(h=i&&i.jquery?h.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+o+"'")}):h=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each(function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new s(o,this))})),h}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+o.eventNamespace,c=h[2];c?n.on(l,c,r):i.on(l,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var s=!1;t(document).on("mouseup",function(){s=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),h=t.pageX,l=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(h=this.originalPageX),"x"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,h,l,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)h=s.snapElements[d].left-s.margins.left,l=h+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,h-g>_||m>l+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(h-_),r=g>=Math.abs(l-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(h-m),r=g>=Math.abs(l-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?(e=arguments[0],void 0):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))
},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,o=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&n(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var n=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,s,n){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,h=a+e.helperProportions.height,l=i.offset.left,c=i.offset.top,u=l+i.proportions().width,d=c+i.proportions().height;switch(s){case"fit":return o>=l&&u>=r&&a>=c&&d>=h;case"intersect":return o+e.helperProportions.width/2>l&&u>r-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&d>h-e.helperProportions.height/2;case"pointer":return t(n.pageY,c,i.proportions().height)&&t(n.pageX,l,i.proportions().width);case"touch":return(a>=c&&d>=a||h>=c&&d>=h||c>a&&h>d)&&(o>=l&&u>=o||r>=l&&u>=r||l>o&&r>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions().height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions({width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,o,a,r=n(e,this,this.options.tolerance,i),h=!r&&this.isover?"isout":r&&!this.isover?"isover":null;h&&(this.options.greedy&&(o=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===o}),a.length&&(s=t(a[0]).droppable("instance"),s.greedyChild="isover"===h)),s&&"isover"===h&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,i),s&&"isout"===h&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.uiBackCompat!==!1&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,h=this._change[o];return this._updatePrevProperties(),h?(i=h.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,h=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,h=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&l&&(t.left=r-e.minWidth),s&&l&&(t.left=r-e.maxWidth),a&&c&&(t.top=h-e.minHeight),n&&c&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,h=t(this).resizable("instance"),l=h.options,c=h.element,u=l.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(h.containerElement=t(d),/document/.test(u)||u===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=h._num(e.css("padding"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,o=h.containerSize.width,a=h._hasScroll(d,"left")?d.scrollWidth:o,r=h._hasScroll(d)?d.scrollHeight:n,h.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?h.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-h.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-h.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,c=h[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=h,_&&(p+=l),v&&(f+=c),g&&(p-=l),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-l)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-l>0?(i.size.width=p,i.position.left=a.left-u):(p=l-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var i=t(this),s=i.offset(),n={left:s.left-e.elementPos.left,top:s.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:n.left,top:n.top,right:n.left+i.outerWidth(),bottom:n.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(s.$element,"ui-selected"),s.selected=!1,i._addClass(s.$element,"ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),i._removeClass(n.$element,s?"ui-unselecting":"ui-selected")._addClass(n.$element,s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),l=!1,c={};i&&i.element!==s.element[0]&&(c.left=i.left+s.elementPos.left,c.right=i.right+s.elementPos.left,c.top=i.top+s.elementPos.top,c.bottom=i.bottom+s.elementPos.top,"touch"===n.tolerance?l=!(c.left>r||o>c.right||c.top>h||a>c.bottom):"fit"===n.tolerance&&(l=c.left>o&&r>c.right&&c.top>a&&h>c.bottom),l?(i.selected&&(s._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(s._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(s._addClass(i.$element,"ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,s._addClass(i.$element,"ui-selected"),i.selected=!0):(s._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(s._removeClass(i.$element,"ui-selected"),i.selected=!1,s._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");i._removeClass(s.$element,"ui-selecting")._addClass(s.$element,"ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;
this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;return o?(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1)):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],h=[],l=this._connectWith();if(l&&e)for(s=l.length-1;s>=0;s--)for(o=t(l[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&h.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]);return e._addClass(n,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,h,l,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[a],l=!1,e[u]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(e[u]-h)&&(n=Math.abs(e[u]-h),o=this.items[s],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})});function changeTheme(a){$("hr").css("border-top-color",a);switch(context.tplkey){case"tpl100":$(".field-title-td").css("background-color",a);break;case"tpl101":$(".field-title-wrap").css("background-color",a);$(".field-title-td").css("border-bottom-color",a);break;case"tpl102":$("#field-list").css("border-left-color",a);$("#baseinfo-header").css("background-color",a);$(".field-title-wrap,.field-title-td .editable").css("background-color",a);$(".field-title-wrap .title-icon-left").css("border-top-color",a);$(".field-title-wrap .title-icon-left").css("border-bottom-color",a);break;case"tpl103":$(".field-title-td").css("border-color",a);$(".field-title-wrap").css("border-top-color",a);$(".field-title-wrap").css("border-left-color",a);$(".field-title-wrap").css("border-right-color",a);$(".field-value-td").css("border-color",a);$("#field-list").css("border-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl104":$("#baseinfo-panel-right").css("background-color",a);$(".baseinfo-title .baseinfo-value,.field-title-td .editable").css("color",a);break;case"tpl105":$("#resume-left").css("background-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-inner").css("background-color",a);$(".field-title-td").css("border-bottom-color",a);break;case"tpl106":$("#baseinfo-panel-right").css("background-color",a);$("#baseinfo-panel-intent .baseinfo-label font").css("color",a);$("#leftinfo .skill-level,#skill-add-btn,#skill-hide-btn").css("background-color",a);$("#leftinfo .skill-level-word").css("color",a);$(".base-title,.skill-title,.hobby-title").css("color",a);$(".title-icon-inner").css("background-color",a);$(".title-icon-right").css("background-color",a);$(".field-title-wrap .editable").css("color",a);break;case"tpl107":$("#baseinfo span.baseinfo-item.baseinfo-title").css("color",a);$(".field-title-wrap,.field-title-td .editable").css("background-color",a);$(".title-icon-left").css("border-left-color",a);break;case"tpl108":$("#baseinfo-header").css("background-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("background-color",a);$(".title-icon-right").css("background-color",a);break;case"tpl109":$("#baseinfo").css("border-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("color",a);break;case"tpl110":$("#skill-level,#skill-add-btn,#skill-hide-btn").css("color",a);$("#resume-left").css("background-color",a);$("#baseinfo .skill-level").css("border-right-color",a);$("#baseinfo-panel-left .baseinfo-label").css("border-bottom-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("background-color",a);$(".title-icon-right").css("background-color",a);break;case"tpl111":$(".field-title-td").css("border-color",a);$(".field-title-wrap .editable").css("color",a);$(".field-value-td").css("border-color",a);$("#field-list").css("border-color",a);break;case"tpl112":$(".field-title-wrap .title-icon-right").css("background-color",a);break;case"tpl113":$("#baseinfo").css("border-top-color",a);$("#avater-wrapper").css("background-color",a).css("border-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("background-color",a);break;case"tpl114":$("#content,#baseinfo").css("border-color",a);$("#baseinfo .field-value-span").css("background-color",a);$(".title-icon-left,.field-title-td .editable").css("color",a);break;case"tpl115":$("#baseinfo").css("border-color",a);$(".field-title-wrap .editable").css("color",a);$(".title-icon-left").css("background-color",a);$(".title-icon-right").css("background-color",a);break;case"tpl116":$("#baseinfo-panel-right").css("background-color",a);$(".baseinfo-title .baseinfo-value,.field-title-td .editable").css("color",a);break;case"tpl117":$("#baseinfo-title .baseinfo-value").css("color",a);$("#skill-level,#skill-add-btn,#skill-hide-btn").css("color",a);$("#resume-left").css("border-left-color",a);$("#leftinfo .skill-level").css("background-color",a);$("#leftinfo .skill-level-word").css("color",a);$(".field-title-td .editable,.title-icon-inner").css("color",a);$("#baseinfo-panel-left .baseinfo-value").css("border-bottom-color",a);break;case"tpl118":$("#resume-left").css("border-left-color",a);$(".field-title-td .editable").css("background-color",a);break;case"tpl119":$("#baseinfo").css("border-top-color",a);$("#resume-left").css("background-color",a);$(".title-icon-left").css("background-color",a);$(".field-title-td .editable").css("background-color",a);$(".field-title-td").css("border-bottom-color",a);break;case"tpl120":$("#baseinfo").css("background-color",a);$(".field-title-td .editable").css("color",a);$(".field-title-td .editable").css("border-color",a);break;case"tpl121":$("#resume-left").css("border-left-color",a);$("#resume-left").css("border-right-color",a);$(".field-title-wrap").css("background-color",a);break;case"tpl122":$("#baseinfo").css("border-top-color",a);$(".title-icon-left").css("border-left-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl123":$("#skill-level,#skill-add-btn,#skill-hide-btn").css("color",a);$("#baseinfo-panel-right").css("background-color",a);$("#leftinfo .skill-title,#leftinfo #skill-title").css("background-color",a);$("#leftinfo .skill-level").css("background-color",a);$("#leftinfo .skill-level-word").css("color",a);break;case"tpl124":$("#field-list").css("border-color",a);$(".field-title-td").css("border-color",a);$(".field-value-td").css("border-color",a);$(".baseinfo-row td").css("border-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl125":$("#field-list").css("border-color",a);$(".field-title-td").css("border-color",a);$(".field-value-td").css("border-color",a);$(".baseinfo-row td").css("border-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl126":$("#baseinfo span.baseinfo-item.baseinfo-title").css("color",a);$("#baseinfo-title").css("border-bottom-color",a);$(".field-title-td .editable").css("background-color",a);break;case"tpl127":$("#baseinfo span.baseinfo-item.baseinfo-title").css("color",a);$(".field-title-td .editable").css("color",a);$(".field-title-td .editable").css("border-color",a);break;case"tpl128":$("#baseinfo-title .editable").css("color",a);$("#baseinfo-title").css("border-bottom-color",a);$(".field-title-wrap").css("background-color",a);break;case"tpl129":$("#baseinfo-header").css("background-color",a);$(".title-icon-left").css("background-color",a);$(".title-icon-right").css("background-color",a);$(".field-title-td .editable").css("color",a);break;case"tpl130":$("#baseinfo-header").css("background-color",a);$("#baseinfo-header .baseinfo-title").css("color",a);$(".field-title-wrap").css("background-color",a).css("border-left-color",a);break;case"tpl131":$("#baseinfo span.baseinfo-item.baseinfo-title .baseinfo-value").css("color",a);$("#baseinfo span.baseinfo-item.baseinfo-title").css("border-bottom-color",a);$('#baseinfo[format="col"] span.baseinfo-fields span.baseinfo-row:nth-of-type(1) .baseinfo-value').css("color",a);$('#baseinfo[format="col"] span.baseinfo-fields span.baseinfo-row:nth-of-type(1)').css("border-bottom-color",a);$(".field-title-wrap").css("border-bottom-color",a);$(".field-title-wrap .editable").css("color",a);break;default:break}$("#content div.editable-three-column .skill-level").css("background-color",a);if(-1=="tpl100|tpl104|tpl107|tpl112|tpl116|tpl120|tpl123".indexOf(context.tplkey)){$('tbody[block="union-1"]').find(".editable-three-column").css("color",a);if(context.tplid>1000){$('tbody[key="work"]').find(".editable-three-column").css("color",a);$('tbody[key="project"]').find(".editable-three-column").css("color",a)}}if(a!=="#"+context.theme){if(-1==location.href.indexOf("muban/detail")&&context.user){context.savedToServer(false);context.integr.push(7)}}else{if(-1==location.href.indexOf("muban/detail"&&context.user)){context.savedToServer(true);context.integr.push(7)}}context.theme=a.substring(1)}if(context.tplid>1000){changeTheme("#"+context.theme)}$('#resume-theme-panel a[data-val="'+context.theme+'"]').addClass("resume-theme-this");if(!$("#content").find("#avater-img").attr("src")){$("#content").find("#avater-img").attr("src",context.thumb+"photo/cv_photo_default.jpg")}if("tpl114"==context.tplkey){$("#content").css("border-color","#"+context.theme)};$.extend({popup:function(b){var c='<div class="fish-popup" style="width:'+b.width+'"><div class="fish-popup-title"><span class="fish-popup-close"><i class="layui-icon">&#x1006;</i></span>'+b.title+'</div><div class="fish-popup-content" style="position:relative;">'+b.content+"</div></div>";var a=$(c);if(b.id){a.attr("id",b.id);if($("#"+b.id).size()>0){return false}}if("left"==b.side){a.css("left",-1*parseInt(b.width)-20+"px");a.find(".fish-popup-close").css("left","auto").css("right","3px")}else{a.css("right",-1*parseInt(b.width)-20+"px");a.find(".fish-popup-close").css("right","auto").css("left","3px")}a.appendTo($("body"));if("left"==b.side){a.animate({left:0},200)}else{a.animate({right:0},200)}a.find(".fish-popup-close").off("click").on("click",function(){if("left"==b.side){a.animate({left:-1*parseInt(b.width)-20},200,function(){$(this).remove()})}else{a.animate({right:-1*parseInt(b.width)-20},200,function(){$(this).remove()})}});return a}});var toolbar=new FishEditor({visible:false,cssPath:context.res+"lib/fish/fishEditor.css"});(function(){toolbar.click(function(a){toolbar.handler.btnClickHandler(a,toolbar);toolbar.handler.panelClickHandler(a,toolbar)});$("body").on("mouseenter","#common-toolbar",function(){$(this).css("z-index",999999999)}).on("mouseleave","#common-toolbar",function(){$(this).css("z-index",1)})})();(function(){toolbar.edit($("#resume-paper .editable:not(.baseinfo-value),#leftinfo .editable,#letter .editable").toArray());$(".field-title-td").each(function(a){if($(this).parents("#baseinfo,#leftinfo").size()<1){$(this).append('<div class="block-tool-box"><a href="javascript:;" class="add-del-btn block-drag-btn"><i class="jlbfont icon-move" style="font-size:15px"></i></a><a href="javascript:;" class="add-del-btn block-del-btn"><i class="jlbfont icon-remove" style="font-size:12px;"></i>删除模块</a><a href="javascript:;" class="add-del-btn block-add-btn"><i class="jlbfont icon-upload-demo" style="font-size:12px;font-weight:bold"></i>添加模块</a></div>')}});$(".field-value-span").each(function(a){if($(this).parents("#baseinfo,#leftinfo").size()<1){$(this).append('<div class="field-tool-box"><a href="javascript:;" class="add-del-btn field-drag-btn"><i class="jlbfont icon-move" style="font-size:15px"></i></a><a href="javascript:;" class="add-del-btn field-del-btn"><i class="jlbfont icon-remove" style="font-size:12px;"></i>删除本条</a><a href="javascript:;" class="add-del-btn field-add-btn"><i class="jlbfont icon-upload-demo" style="font-size:12px;font-weight:bold"></i>新增一条</a></div>');$(this).find(".field-tool-box").append('<a href="javascript:;" class="add-del-btn desc-del-btn"><i class="jlbfont icon-delete1" style="font-size:14px"></i></a>');$(this).find(".field-tool-box").append('<a href="javascript:;" class="add-del-btn desc-add-btn"><i class="jlbfont icon-preview" style="font-size:16px"></i></a>');$(this).find(".field-tool-box").append('<a href="javascript:;" class="add-del-btn desc-how-btn">如何填写？</a>')}});$("#content").on("mouseenter",".block-drag-btn,.field-drag-btn,.desc-del-btn,.desc-add-btn",function(){var a=$(this).hasClass("desc-del-btn")?"隐藏描述":($(this).hasClass("desc-add-btn")?"显示描述":"拖动排序");toolBoxTips=layer.tips(a,this,{tips:2,tipsMore:true,success:function(b,c){b.css("top",(b.offset().top-10)+"px")}})}).on("mouseleave",".block-drag-btn,.field-drag-btn,.desc-del-btn,.desc-add-btn",function(){layer.close(toolBoxTips)});$("#content").on("keypress",".baseinfo-label, .baseinfo-value, .field-title",function(a){if(a.keyCode==13){a.preventDefault()}});$(function(){document.execCommand("AutoUrlDetect",false,false)});$("#content").on("paste",".editable",function(a){a=a||event;a.preventDefault();var b;if((a.originalEvent||a).clipboardData){b=(a.originalEvent||a).clipboardData.getData("text/plain");document.execCommand("insertHTML",false,b)}else{b=window.clipboardData.getData("Text");document.execCommand("paste",false,b)}})})();(function(){if("avater-inner"!=$("#avater-img").parent().attr("id")){$("#avater-img").wrap('<div id="avater-inner"></div>');$("#avater-img").attr("width","").attr("height","")}var e=$("#avater-img").attr("width");var f=$("#avater-img").attr("height");var a=($("#avater-wrapper").width()-$("#avater-img").width())/2;var d=$('<button type="button" class="layui-btn" id="upload-btn"><i class="layui-icon">&#xe67c;</i>上传照片</button>').appendTo($("#avater-wrapper"));var c=$('<span id="upload-ldg"></span>').css("position","absolute").css("display","none").css("left","0px").css("top","0px").css("width",e+"px").css("height",f+"px").css("background-image","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif)").css("z-index","10").css("background-color","rgba(0,0,0,0.5)").css("background-position","center center").css("background-repeat","no-repeat").appendTo($("#avater-wrapper"));$("#avater-wrapper").mouseover(function(g){d.css("display","block");b.css("display","block")});$("#avater-wrapper").mouseleave(function(g){d.css("display","none");b.css("display","none")});layui.use("upload",function(){var g=1024;if(context.vip){g=100*1024}var h=layui.upload.render({elem:"#upload-btn",url:context.host+"resume/upphoto?resume_id="+context.resume,before:function(j){if(!context.user){layer.msg("请先登录");h.config.elem.next()[0].value="";return false}if("editor"==context.page){layer.msg("请先完善简历");h.config.elem.next()[0].value="";return false}$("#upload-ldg").css("display","block")},done:function(j){$("#upload-ldg").css("display","none");if(j&&j.retCode==0){$("#avater-img").attr("src",j.retText+"?v="+Math.round((new Date()).getTime()/1000));context.savedToServer(false)}else{if(j&&j.retCode!=0){layer.msg(j.retText,{icon:2,anim:6});h.config.elem.next()[0].value=""}else{layer.msg("照片上传失败，请稍后再试",{icon:2,anim:6});h.config.elem.next()[0].value=""}}},error:function(){$("#upload-ldg").css("display","none");layer.msg("照片上传异常，请稍后再试",{icon:2,anim:6});h.config.elem.next()[0].value=""},size:g,field:"file",accept:"images",exts:"jpg|png|jpeg"})});var b=$('<button type="button" class="layui-btn" id="photo-close-btn" data-trace="editor-operate-hidephoto">隐藏</button>').appendTo($("#avater-wrapper"));$("#avater-wrapper").on("click","#photo-close-btn",function(){var h=$("#avater-wrapper");var j=h.attr("data-show");if("hide"!==j){h.attr("data-show","hide");if(-1!="tpl124|tpl125".indexOf(context.tplkey)){h=$("#baseinfo-table");h.attr("data-show","hide")}var g=$("#baseinfo-panel-left");g.attr("data-width","100%");layer.msg("可在操作历史或编辑基本信息时恢复显示照片",{time:0,btn:["知道了"]});context.historyBak({parent:g,child:h,action:"photo",text:"隐藏照片"})}context.savedToServer(false)})})();$(function(){$('<span id="page-line-one"><span id="page-tips-one">— 超出1页 —</span><span class="page-one-btn" data-trace="editor-operate-pageone">自动缩成1页</span></span>').appendTo($("#container"));$('<span id="page-line-two"><span id="page-tips-two">— 超出2页 —</span><span class="page-two-btn" data-trace="editor-operate-pageone">自动缩成2页</span></span>').appendTo($("#container"));if("editor"!=context.page){showAndHidePageLine()}});function showAndHidePageLine(){var a=1445;var c=2790;if(1==context.tplpage){a=a-70;c=c-70}if("show"==$("#cover").attr("data-show")){a=a+1375;c=c+1375}$("#page-line-one").css("top",a+"px");$("#page-line-two").css("top",c+"px");var b=$("#content").outerHeight();b=b>1345?b:1345;if(b>1345&&b<=2690){if(!$("#page-line-one").is(":visible")){$("#page-line-one").show()}if($("#page-line-two").is(":visible")){$("#page-line-two").hide()}}else{if(b>2690){if(!$("#page-line-one").is(":visible")){$("#page-line-one").show()}if(!$("#page-line-two").is(":visible")){$("#page-line-two").show()}}else{if(b<=1345){if($("#page-line-one").is(":visible")){$("#page-line-one").hide()}if($("#page-line-two").is(":visible")){$("#page-line-two").hide()}}}}}if($("#resume-left").size()>0){$("#resume-left").css("height","")}$("#content").on("keydown",".editable",function(b){var c=b||window.event;var a=c.keyCode;if((a>=112&&a<=123)||(a>=37&&a<=40)||(a>=16&&a<=20)||a==144||a==36||a==35||a==9||a==91||a==83){console.log("keycode="+a)}else{if(!$(this).data("data-his")){$(this).data("data-his",$(this).html())}}});$("#content").on("keyup",".editable",function(b){var c=b||window.event;var a=c.keyCode;if((a>=112&&a<=123)||(a>=37&&a<=40)||(a>=16&&a<=20)||a==144||a==36||a==35||a==9||a==91||a==83){console.log("keycode="+a)}else{if($(this).data("data-his")!=$(this).html()&&!$(this).data("data-hised")){$(this).data("data-hised",true);context.savedToServer(false);context.integr.push(2)}showAndHidePageLine()}});$("#content").on("click",".block-add-btn",function(){var e=$.popup({title:'添加模块<font style="color:#bbb;font-size:12px;">&nbsp;&nbsp;&nbsp;标题和内容可自定义修改</font>',content:"",width:"680px",side:"left",id:"resume-block-panel"});if(!e){return false}var d=$.data(document.body,"_block_list_data_");if(!d){e.css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat");$.post(context.host+"resume/blocks",{},function(f){f=$.parseJSON(f).data;c(f);$.data(document.body,"_block_list_data_",f);e.css("background","")})}else{c(d)}var b=$(this).parents("tbody").eq(0);var a=b.clone();function c(h){var l="";var k="";var j=$("#field-list>tbody");if(-1!="tpl111|tpl125".indexOf(context.tplkey)){k='<tr><td class="field-title-td"><div class="field-title-wrap"><div class="editable editable-hover" contenteditable="true">{_block_title_con_}</div></div></td></tr>'}else{if(j&&j.size()>1){var f=j.eq(1).find("tr").eq(0).clone();f.find(".field-title-wrap .editable").text("{_block_title_con_}");k=f.prop("outerHTML")}}for(i in h){var g='<div class="block-item-back"><div class="block-item-addbtn layui-btn layui-btn-primary" block="'+h[i].block_type+'" key="'+h[i].block_key+'" name="'+h[i].block_name+'" data-trace="editor-block-add'+h[i].block_key+'"><i class="jlbfont icon-upload-demo" style="font-size:14px !important;font-weight:bold;"></i> 添加此模块</div></div>';l+=('<div class="block-item" block="'+h[i].block_type+'" key="'+h[i].block_key+'"><table style="width:100%;">'+k.replace("{_block_title_con_}",h[i].block_name)+'<tr><td class="field-value-td">'+h[i].block_content+"</td></tr></table>"+g+"</div>")}e.find(".fish-popup-content").html(l);e.find(".editable-three-column .skill-level").css("background-color","#"+context.theme);if(-1!="tpl118|tpl119".indexOf(context.tplkey)){e.css("width","790px");e.find(".block-item").css("margin-left","150px");e.find(".block-item-back").css("width","760").css("margin-left","-140px")}if(-1!="tpl126|tpl127".indexOf(context.tplkey)){e.css("width","810px");e.find(".block-item").css("margin-left","165px");e.find(".block-item-back").css("width","770").css("margin-left","-150px")}if(-1!="tpl120".indexOf(context.tplkey)){e.css("width","810px");e.find(".block-item").css("margin-left","170px");e.find(".block-item-back").css("width","770").css("margin-left","-155px")}if(-1!="tpl108|tpl109|tpl110|tpl113|tpl114|tpl115|tpl129".indexOf(context.tplkey)){e.find(".title-icon-right").css("width","560px")}if(-1!="tpl102".indexOf(context.tplkey)){e.find(".title-icon-right").css("width","515px")}if(-1!="tpl112|tpl117".indexOf(context.tplkey)){e.find(".title-icon-right").css("width","600px")}e.find(".block-item-addbtn").off("click").on("click",function(){e.animate({left:-1*e.width()},300).remove();var o=$(this).parent().prev().find(".field-value-span");var m=a.find(".field-value-span").eq(0).find(".field-tool-box");o.append(m);a.attr("block",$(this).attr("block"));a.attr("key",$(this).attr("key"));a.find(".field-value-td").empty().append(o);a.find(".editable-right, .editable-center, .editable-lcenter, .editable-rcenter").resizable(resizableOption);b.after(a);a.css("background","#eee").hide(0).fadeIn(500,function(){$(this).removeAttr("style")});var n=a.find(".editable");n.eq(0).html($(this).attr("name"));n.removeClass("editable-hover");if(("en"==context.cvlang)&&("three-2"==$(this).attr("block"))){a.find(".skill-level-word").text("Good")}toolbar.edit(n.toArray());a.sortable({axis:"y",items:".field-value-span",handle:".field-drag-btn",tolerance:"pointer",placeholder:"field-drag-holder",start:function(p,q){$(".field-drag-holder").text("拖动到这里");var r=q.helper.height();$(".field-drag-holder").css("height",r+"px").css("line-height",r+"px")},update:function(p,q){context.savedToServer(false)}});renderDateRangeWidget(a.find("div.editable-three-column.editable-left:not(.skilleditable)"));$("html,body").animate({scrollTop:$(document).scrollTop()+b.height()},500);$(document.documentElement).animate({scrollTop:$(document).scrollTop()+b.height()},500);context.savedToServer(false);showAndHidePageLine();context.integr.push(5)})}context.trace("editor-block-blkadd")});$("#content").on("click",".field-add-btn",function(){var b=$(this).parent().parent();var a=b.clone();b.after(a);toolbar.edit(a.find(".editable").toArray());a.find(".ui-resizable-handle").remove();a.find(".editable-right, .editable-center, .editable-lcenter, .editable-rcenter").resizable(resizableOption);renderDateRangeWidget(a.find("div.editable-three-column.editable-left:not(.skilleditable)").removeAttr("lay-key"));a.hide().css("background","#eee").fadeIn(500,function(){a.removeAttr("style");var d=parseInt(b.css("margin-bottom"));if(d>0){a.css("margin-bottom",d+"px");b.removeAttr("style")}});var c=$(this).attr("data-scroll");if(!c){$("html,body").animate({scrollTop:$(document).scrollTop()+b.height()},500);$(document.documentElement).animate({scrollTop:$(document).scrollTop()+b.height()},500);context.savedToServer(false);showAndHidePageLine();context.integr.push(6);context.trace("editor-content-conadd")}});$("#content").on("click","tbody .block-del-btn",function(){var a=$(this);layer.confirm("确定删除此模块吗？(可在操作历史中恢复)",{title:"提示"},function(b,d){var c=a.parents("tbody").eq(0);if(c.prev().size()<1){context.historyBak({parent:c.next(),child:c,action:"before",text:"删除模块"})}else{context.historyBak({parent:c.prev(),child:c,action:"after",text:"删除模块"})}c.wrap("<span></span>").parent().slideUp("normal",function(){$(this).remove();context.savedToServer(false);showAndHidePageLine()});context.integr.push(5);layer.close(b)});context.trace("editor-block-blkdel")});$("#content").on("mouseenter","tbody .block-tool-box",function(){$(this).parents("tbody").eq(0).css("background-color","#f8f8f8").css("box-shadow","0px 0px 2px #bbb")}).on("mouseleave","tbody .block-tool-box",function(){$(this).parents("tbody").eq(0).css("background-color","").css("box-shadow","")});$("#content").on("click","tbody .field-del-btn",function(){var a=$(this);layer.confirm("确定删除本条内容吗？(可在操作历史中恢复)",{title:"提示"},function(c,e){var f=a.parent().parent().parent();if(f.find(".field-value-span").size()>1){var b=a.parent().parent();if(b.prev().size()<1){context.historyBak({parent:b.next(),child:b,action:"before",text:"删除一条"})}else{context.historyBak({parent:b.prev(),child:b,action:"after",text:"删除一条"})}b.wrap("<span></span>").parent().slideUp("normal",function(){$(this).remove();context.savedToServer(false);showAndHidePageLine()})}else{var d=a.parents("#field-list tbody").eq(0);if(d.prev().size()<1){context.historyBak({parent:d.next(),child:d,action:"before",text:"删除模块"})}else{context.historyBak({parent:d.prev(),child:d,action:"after",text:"删除模块"})}d.wrap("<span></span>").parent().slideUp("normal",function(){$(this).remove();context.savedToServer(false);showAndHidePageLine()})}context.integr.push(6);layer.close(c)});context.trace("editor-content-condel")});$("#content").on("click","tbody .desc-del-btn",function(){var a=$(this).parent().parent();context.historyBak({parent:a,child:$(this),action:"describe",text:"隐藏描述"});a.attr("data-desc","hide");context.savedToServer(false);showAndHidePageLine();context.integr.push(6);context.trace("editor-content-conhide")});$("#content").on("click","tbody .desc-add-btn",function(){var a=$(this).parent().parent();a.removeAttr("data-desc");context.savedToServer(false);showAndHidePageLine();context.integr.push(6);context.trace("editor-content-conshow")});$("#field-list").sortable({axis:"y",items:'tbody:not("#baseinfo")',handle:".field-title-td .block-drag-btn",tolerance:"pointer",placeholder:"block-drag-holder",start:function(a,b){$(".block-drag-holder").text("拖动到这里");var c=b.helper.height();$(".block-drag-holder").css("height",c+"px").css("line-height",c+"px")},update:function(a,b){context.savedToServer(false);context.trace("editor-block-blkdrag")}});$("#field-list>tbody").sortable({axis:"y",items:".field-value-span",handle:".field-drag-btn",tolerance:"pointer",placeholder:"field-drag-holder",start:function(a,b){$(".field-drag-holder").text("拖动到这里");var c=b.helper.height();$(".field-drag-holder").css("height",c+"px").css("line-height",c+"px")},update:function(a,b){context.savedToServer(false);context.trace("editor-content-condrag")}});var resizableOption={handles:"w",maxWidth:400,minWidth:100,prevInitWidth:0,start:function(a,b){this.prevInitWidth=$(this).prev().width()},resize:function(a,b){$(this).prev().width(this.prevInitWidth+(b.originalSize.width-b.size.width));$(this).css("left","")},stop:function(a,b){context.savedToServer(false);context.trace("editor-content-conresize")}};$(".editable-right, .editable-center, .editable-lcenter, .editable-rcenter").each(function(){if(-1==$(this).html().indexOf("div")){var a=$(this).text().replace(/(^\s*)|(\s*$)/g,"");a=!a?"<br>":a;$(this).html("<div>"+a+"</div>")}$(this).resizable(resizableOption)});function renderDateRangeWidget(a){layui.use("laydate",function(){var b=layui.laydate;a.each(function(){var c=this;b.render({elem:c,type:"month",format:"yyyy/MM",showBottom:true,btns:["clear","now","confirm"],range:true,done:function(e,f,d){console.log(e);context.savedToServer(false)}})})})}renderDateRangeWidget($("div.editable-three-column.editable-left:not(.skilleditable)"));$("#content").on("click",'tbody[key="intention"] .editable-right',function(d){if($(this).next("ul").size()>0){$(this).next("ul").remove();return false}$(this).addClass("editable-select");var c=$('<ul class="editable-options"></ul>');c.css("position","absolute").css("padding","0px").css("margin","0px").css("list-style","none").css("right","0px").css("top",$(this).position().top+$(this).height()+15+"px").css("width",$(this).width()+"px").css("height","124px").css("text-align","center").css("background","#fff").css("border","1px #ccc solid").css("border-radius","2px").css("box-shadow","0px 1px 6px #bbb").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");var b=$('<li style="padding:5px 10px;height:20px;"></li>');if("en"==context.cvlang){c.append(b.clone().css("border-bottom","1px #eee solid").html("➢ Full-time"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢ Internship"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢ Part-time"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢ Other"))}else{c.append(b.clone().css("border-bottom","1px #eee solid").html("➢ 工作性质：全职"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢ 工作性质：实习"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢ 工作性质：兼职"));c.append(b.clone().css("border-bottom","1px #eee solid").html("➢ 工作性质：其他"))}$(this).after(c);var a=$(this);c.on("click","li",function(){if("取消"!=$(this).text()&&a.text()!=$(this).text()){a.html($(this).html()).focus();context.savedToServer(false);context.integr.push(2)}c.remove();c.off("mouseover");c.off("mouseout");c.off("click")});c.on("mouseover","li",function(){$(this).css("background","#eef0fc").css("cursor","pointer")});c.on("mouseout","li",function(){$(this).css("background","")})});$("#content").on("click",'tbody[key="education"] .editable-right',function(d){if($(this).next(".editable-options").size()>0){$(this).next(".editable-options").remove();return false}$(this).addClass("editable-select");var a=$('<div class="editable-options"></div>');a.css("position","absolute").css("padding","0px").css("margin","0px").css("right","1px").css("top","2px").css("width",$(this).width()+"px").css("height","34px").css("background","#f8f8f8").css("border-radius","2px").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");var h=$('<div class="degree-options" style="position:absolute;width:25%;height:20px;overflow:hidden;left:3%;top:5px;background:#fff;padding:2px 6px;border-radius:2px;" placeholder="选择学历"></div>');var j=$('<div class="major-options" style="position:absolute;width:55%;min-height:20px;overflow:hidden;right:3%;top:5px;background:#fff;padding:2px 6px;border-radius:2px;" placeholder="填写专业" contenteditable="true"></div>');var b=$('<ul class="editable-select"></ul>');b.css("position","absolute").css("padding","0px").css("margin","0px").css("list-style","none").css("left","0px").css("top",$(this).position().top+$(this).height()+15+"px").css("width",$(this).width()+"px").css("height","auto").css("background","#fff").css("border","1px #ccc solid").css("border-radius","2px").css("box-shadow","0px 1px 6px #bbb").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");var f=$('<li style="padding:5px 10px;height:20px;"></li>');if("en"==context.cvlang){b.append(f.clone().css("border-bottom","1px #eee solid").html("Bachelor"));b.append(f.clone().css("border-bottom","1px #eee solid").html("Associate"));b.append(f.clone().css("border-bottom","1px #eee solid").html("Master"));b.append(f.clone().css("border-bottom","1px #eee solid").html("Doctor"))}else{b.append(f.clone().css("border-bottom","1px #eee solid").html("大专"));b.append(f.clone().css("border-bottom","1px #eee solid").html("本科"));b.append(f.clone().css("border-bottom","1px #eee solid").html("硕士"));b.append(f.clone().css("border-bottom","1px #eee solid").html("博士"));b.append(f.clone().css("border-bottom","1px #eee solid").html("中专"));b.append(f.clone().css("border-bottom","1px #eee solid").html("高中"));b.append(f.clone().css("border-bottom","1px #eee solid").html("初中"));b.append(f.clone().css("border-bottom","1px #eee solid").html("小学"));b.append(f.clone().css("border-bottom","1px #eee solid").html("不填"))}a.append(h);a.append(j);a.append(b);$(this).after(a);if($("#major-style").size()<1){$("head").append('<style id="major-style">.degree-options:empty:before,.major-options:empty:before{content:attr(placeholder);color:#ccc;}.degree-options:focus:before,.major-options:not(:before){content:none;}</style>')}var k=$(this);a.off("click").on("click","li",function(){if($(this).hasClass("major-item")){k.find("div:eq(0)").text(k.text().replace(j.text(),$(this).text()));j.text($(this).text())}else{if("不填"!=$(this).text()){h.text($(this).text());k.find("div:eq(0)").html($(this).text())}}j.focus();b.hide()});var g=a.find(".major-options").get(0);var c=false;g.addEventListener("compositionstart",function(){c=true});g.addEventListener("compositionend",function(){c=false});a.off("keyup").on("keyup",".major-options",function(){if(c){return false}var l="未填写"==h.text()?"":h.text();var e=j.text()?j.text():"";if(l&&e){k.find("div:eq(0)").html(l+" - "+e)}else{if(l&&!e){k.find("div:eq(0)").html(l)}else{if(!l&&e){k.find("div:eq(0)").html(e)}else{k.find("div:eq(0)").html("")}}}context.savedToServer(false);context.integr.push(2);$.get(context.host+"common/kwquery",{kw:e,type:"discipline"},function(p){var m=$.parseJSON(p);if(0==m.retCode){if(m.data.length>0){b.html("").show();var o=$('<li class="major-item" style="padding:5px 10px;height:20px;overflow:hidden;text-align:center;"></li>');for(var n in m.data){b.append(o.clone().css("border-bottom","1px #eee solid").html(m.data[n].name.replace(e,'<font color="#1E9FFF">'+e+"</font>")))}}else{b.hide()}}else{b.hide()}})});a.off("mouseover").on("mouseover","li",function(){$(this).css("background","#eef0fc").css("cursor","pointer")});a.off("mouseout").on("mouseout","li",function(){$(this).css("background","")})});$("#content").on("click",'tbody[key="education"] .editable-center',function(f){if($(this).parent().next("ul").size()>0){$(this).parent().next("ul").remove();return false}$(this).addClass("editable-select");var d=$('<ul class="editable-options" style="display:none;"></ul>');d.css("position","absolute").css("padding","0px").css("margin","0px").css("list-style","none").css("left",$(this).position().left+9+"px").css("left","calc(1% + "+$(this).position().left+"px").css("top",$(this).position().top+$(this).height()+15+"px").css("width",$(this).width()+"px").css("height","auto").css("text-align","center").css("background","#fff").css("border","1px #ccc solid").css("border-radius","2px").css("box-shadow","0px 1px 6px #bbb").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");$(this).after(d);var a=$(this);d.off("click").on("click","li",function(){a.find("div:eq(0)").html($(this).text()).focus();d.remove()});var c=a.get(0);var b=false;c.addEventListener("compositionstart",function(){b=true});c.addEventListener("compositionend",function(){b=false});a.off("keyup").on("keyup",function(){if(b){return false}var e=$(this).text().replace(/(^\s*)|(\s*$)/g,"");context.savedToServer(false);context.integr.push(2);$.get(context.host+"common/kwquery",{kw:e,type:"college"},function(k){var g=$.parseJSON(k);if(0==g.retCode){if(g.data.length>0){d.html("").show();var j=$('<li class="major-item" style="padding:5px 10px;height:20px;overflow:hidden;"></li>');for(var h in g.data){d.append(j.clone().css("border-bottom","1px #eee solid").html(g.data[h].name.replace(e,'<font color="#1E9FFF">'+e+"</font>")))}}else{d.hide()}}else{d.hide()}})});d.off("mouseover").on("mouseover","li",function(){$(this).css("background","#eef0fc").css("cursor","pointer")});d.off("mouseout").on("mouseout","li",function(){$(this).css("background","")})});$("#content").on("click",'tbody[key="work"] .editable-center',function(f){if($(this).parent().next("ul").size()>0){$(this).parent().next("ul").remove();return false}$(this).addClass("editable-select");var d=$('<ul class="editable-options" style="display:none;"></ul>');d.css("position","absolute").css("padding","0px").css("margin","0px").css("list-style","none").css("left",$(this).position().left+9+"px").css("left","calc(1% + "+$(this).position().left+"px").css("top",$(this).position().top+$(this).height()+15+"px").css("width",$(this).width()+"px").css("height","auto").css("text-align","center").css("background","#fff").css("border","1px #ccc solid").css("border-radius","2px").css("box-shadow","0px 1px 6px #bbb").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");$(this).after(d);var a=$(this);d.off("click").on("click","li",function(){a.find("div:eq(0)").html($(this).text()).focus();d.remove()});var c=a.get(0);var b=false;c.addEventListener("compositionstart",function(){b=true});c.addEventListener("compositionend",function(){b=false});a.off("keyup").on("keyup",function(){if(b){return false}var e=$(this).text().replace(/(^\s*)|(\s*$)/g,"");context.savedToServer(false);context.integr.push(2);$.get(context.host+"common/kwquery",{kw:e,type:"company"},function(k){var g=$.parseJSON(k);if(0==g.retCode){if(g.data.length>0){d.html("").show();var j=$('<li class="major-item" style="padding:5px 10px;height:20px;overflow:hidden;"></li>');for(var h in g.data){d.append(j.clone().css("border-bottom","1px #eee solid").html(g.data[h].cont.replace(e,'<font color="#1E9FFF">'+e+"</font>")))}}else{d.hide()}}else{d.hide()}})});d.off("mouseover").on("mouseover","li",function(){$(this).css("background","#eef0fc").css("cursor","pointer")});d.off("mouseout").on("mouseout","li",function(){$(this).css("background","")})});$("#content").on("click",'tbody[key="work"] .editable-right',function(f){if($(this).parent().next("ul").size()>0){$(this).parent().next("ul").remove();return false}$(this).addClass("editable-select");var d=$('<ul class="editable-options" style="display:none;"></ul>');d.css("position","absolute").css("padding","0px").css("margin","0px").css("list-style","none").css("right","0px").css("top",$(this).position().top+$(this).height()+15+"px").css("width",$(this).width()+"px").css("height","auto").css("text-align","center").css("background","#fff").css("border","1px #ccc solid").css("border-radius","2px").css("box-shadow","0px 1px 6px #bbb").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");$(this).after(d);var a=$(this);d.off("click").on("click","li",function(){a.find("div:eq(0)").html($(this).text()).focus();d.remove()});var c=a.get(0);var b=false;c.addEventListener("compositionstart",function(){b=true});c.addEventListener("compositionend",function(){b=false});a.off("keyup").on("keyup",function(){if(b){return false}var e=$(this).text().replace(/(^\s*)|(\s*$)/g,"");context.savedToServer(false);context.integr.push(2);$.get(context.host+"common/kwquery",{kw:e,type:"position"},function(k){var g=$.parseJSON(k);if(0==g.retCode){if(g.data.length>0){d.html("").show();var j=$('<li class="major-item" style="padding:5px 10px;height:20px;overflow:hidden;"></li>');for(var h in g.data){d.append(j.clone().css("border-bottom","1px #eee solid").html(g.data[h].cont.replace(e,'<font color="#1E9FFF">'+e+"</font>")))}}else{d.hide()}}else{d.hide()}})});d.off("mouseover").on("mouseover","li",function(){$(this).css("background","#eef0fc").css("cursor","pointer")});d.off("mouseout").on("mouseout","li",function(){$(this).css("background","")})});$(".baseinfo-panel").on("focus",'input[name="job"]',function(f){if($(this).parent().next("ul").size()>0){$(this).parent().next("ul").remove();return false}$(this).addClass("editable-select");var d=$('<ul class="editable-options" style="display:none;"></ul>');d.css("position","absolute").css("padding","0px").css("margin","0px").css("list-style","none").css("left","0px").css("top",$(this).position().top+$(this).height()+5+"px").css("width",$(this).width()+10+"px").css("height","auto").css("text-align","center").css("background","#fff").css("border","1px #ccc solid").css("border-radius","2px").css("box-shadow","0px 1px 6px #bbb").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");$(this).after(d);var a=$(this);d.off("click").on("click","li",function(){a.val($(this).text()).focus();d.remove()});var c=a.get(0);var b=false;c.addEventListener("compositionstart",function(){b=true});c.addEventListener("compositionend",function(){b=false});a.off("keyup").on("keyup",function(){if(b){return false}var e=$(this).val().replace(/(^\s*)|(\s*$)/g,"");context.savedToServer(false);context.integr.push(2);$.get(context.host+"common/kwquery",{kw:e,type:"position"},function(k){var g=$.parseJSON(k);if(0==g.retCode){if(g.data.length>0){d.html("").show();var j=$('<li class="major-item" style="padding:5px 10px;height:20px;overflow:hidden;"></li>');for(var h in g.data){d.append(j.clone().css("border-bottom","1px #eee solid").html(g.data[h].cont.replace(e,'<font color="#1E9FFF">'+e+"</font>")))}}else{d.hide()}}else{d.hide()}})});d.off("mouseover").on("mouseover","li",function(){$(this).css("background","#eef0fc").css("cursor","pointer")});d.off("mouseout").on("mouseout","li",function(){$(this).css("background","")})});$("#content").mousedown(function(b){var a=$(".editable-options");a.each(function(c){if(!$.contains(this,b.target)){$(this).remove()}})});(function(){if("tpl106"==context.tplkey||"tpl110"==context.tplkey||"tpl117"==context.tplkey||"tpl123"==context.tplkey){$("#content").on("click","span.skill-level-bg",function(c){var a=c.pageX-$(this).offset().left;var d=$(this).width();var b=Math.round((a/d)*100);$(this).find(".skill-level").css("width",b+"%");if(b<25){$(this).next().text("了解")}else{if(b<50){$(this).next().text("掌握")}else{if(b<75){$(this).next().text("熟练")}else{$(this).next().text("精通")}}}context.savedToServer(false)});$("#baseinfo-panel-skill").on("click",".skill-del-btn",function(a){$(this).parent().remove();context.savedToServer(false)});$("#baseinfo-panel-skill").on("click","#skill-add-btn",function(a){$(this).before($(this).prev().clone());context.savedToServer(false)});$("#baseinfo-panel-skill").on("mouseenter",function(){$(this).find("#skill-add-btn,#skill-hide-btn,.skill-del-btn").css("visibility","visible")}).on("mouseleave",function(){$(this).find("#skill-add-btn,#skill-hide-btn,.skill-del-btn").css("visibility","hidden")});if($("#skill-add-btn").size()<1){$("#baseinfo-panel-skill").append('<div id="skill-add-btn">新增一条</div>')}if($("#skill-hide-btn").size()<1){$("#baseinfo-panel-skill").append('<div id="skill-hide-btn">隐藏面板</div>')}$("#baseinfo-panel-skill").on("click","#skill-hide-btn",function(a){if($("#baseinfo-panel-skill").attr("data-show")=="hide"){$("#baseinfo-panel-skill").attr("data-show","show");$(this).html("隐藏面板")}else{$("#baseinfo-panel-skill").attr("data-show","hide");$(this).html("显示面板")}context.savedToServer(false)})}$("#content div.skill-level").css("background-color","#"+context.theme);$("#content").on("click","div.skill-level-bg",function(c){var a=c.pageX-$(this).offset().left;var d=$(this).width();var b=Math.round((a/d)*100);$(this).find(".skill-level").css("width",b+"%");if(b<25){$(this).parent().next().find(".skill-level-word").text(context.skilllevel[context.cvlang].average)}else{if(b<50){$(this).parent().next().find(".skill-level-word").text(context.skilllevel[context.cvlang].good)}else{if(b<75){$(this).parent().next().find(".skill-level-word").text(context.skilllevel[context.cvlang].advanced)}else{$(this).parent().next().find(".skill-level-word").text(context.skilllevel[context.cvlang].expert)}}}context.savedToServer(false)});$("#content").on("click","div.skill-level-word",function(d){if($(this).parent().next("ul").size()>0){$(this).parent().next("ul").remove();return false}$(this).addClass("editable-select");var c=$('<ul class="editable-options"></ul>');c.css("position","absolute").css("padding","0px").css("margin","0px").css("list-style","none").css("right","0px").css("top",$(this).parent().position().top+$(this).height()+15+"px").css("width",$(this).parent().width()+"px").css("height","124px").css("text-align","center").css("background","#fff").css("border","1px #ccc solid").css("border-radius","2px").css("box-shadow","0px 1px 6px #bbb").css("font-size","15px").css("font-weight","300").css("color","#666").css("z-index","1000");var b=$('<li style="padding:5px 10px;height:20px;"></li>');c.append(b.clone().css("border-bottom","1px #eee solid").html(context.skilllevel[context.cvlang].expert));c.append(b.clone().css("border-bottom","1px #eee solid").html(context.skilllevel[context.cvlang].advanced));c.append(b.clone().css("border-bottom","1px #eee solid").html(context.skilllevel[context.cvlang].good));c.append(b.clone().css("border-bottom","1px #eee solid").html(context.skilllevel[context.cvlang].average));$(this).parent().after(c);var a=$(this);c.on("click","li",function(){if("取消"!=$(this).text()&&a.text()!=$(this).text()){a.html($(this).html());switch($(this).html()){case context.skilllevel[context.cvlang].average:$(this).parent().prev().prev().find(".skill-level").css("width","20%");break;case context.skilllevel[context.cvlang].good:$(this).parent().prev().prev().find(".skill-level").css("width","50%");break;case context.skilllevel[context.cvlang].advanced:$(this).parent().prev().prev().find(".skill-level").css("width","70%");break;case context.skilllevel[context.cvlang].expert:$(this).parent().prev().prev().find(".skill-level").css("width","90%");break;default:break}context.savedToServer(false);context.integr.push(2)}c.remove();c.off("mouseover");c.off("mouseout");c.off("click")});c.on("mouseover","li",function(){$(this).css("background","#eef0fc").css("cursor","pointer")});c.on("mouseout","li",function(){$(this).css("background","")})})})();$("#operate-save").click(function(z){if(!context.user){$("#header .jlb-login-link").click();return false}if(context.hasSavedToServer){return false}var b=$("#resume-paper").clone();b.find("#avater-wrapper").find("#upload-btn").remove();b.find("#avater-wrapper").find("#upload-ldg").remove();b.find("#avater-wrapper").find("#photo-close-btn").remove();b.find("#avater-wrapper").find(".layui-upload-file").remove();b.find(".editable-options").remove();b.find(".block-tool-box, .field-tool-box").remove();b.find(".editable").removeAttr("contenteditable").removeAttr("lay-key").removeClass("editable-hover").removeClass("editable-focus").removeClass("ui-resizable");b.find("#field-list,#field-list tbody").removeAttr("class");b.find("#field-list tbody").removeAttr("style");b.find("#field-list .field-value-span").css("background-color","");b.find(".ui-resizable-handle").remove();b.find('tbody[display="hide"]').remove();b.find("grammarly-extension").remove();var u=b.html();var q=$.md5(u);if(context.resumeMd5==q){if(context.savedToServerAuto){layer.msg("已自动保存")}else{layer.msg("保存成功")}context.savedToServer(true);return false}else{context.resumeMd5=q}var a=$('input[name="resumeNo"]').val();var c=$('input[name="resumeName"]').val();var E=$('#baseinfo span[key="name"]').text();var o=$('#baseinfo span[key="sex"]').text();var p=$('#baseinfo span[key="age"]').attr("birthday");var s=$('#baseinfo span[key="age"]').text();var e=$('#baseinfo span[key="mobile"]').text();var v=$('#baseinfo span[key="email"]').text();var m=$('#baseinfo span[key="job"]').text();var y=$('#baseinfo span[key="years"]').text();var w=$('#baseinfo span[key="major"]').text();var t=$('#baseinfo span[key="school"]').text();var n=$('#baseinfo span[key="edu"]').text();var d=$('#baseinfo span[key="nation"]').text();var x=$('#baseinfo span[key="from"]').attr("val");var D=$('#baseinfo span[key="from"]').attr("shi");var j=$('#baseinfo span[key="address"]').attr("val");var r=$('#baseinfo span[key="address"]').attr("sheng");var f=$('#baseinfo span[key="marital"]').text();var l=$('#baseinfo span[key="polity"]').text();var C=$('#baseinfo span[key="intro"]').text()||$("#baseinfo").attr("intro");var B=$("#baseinfo").attr("format")||"row";var g=[];for(var A=0;A<context.integr.length;A++){if(g.indexOf(context.integr[A])==-1){g.push(context.integr[A])}}g="["+g.sort().toString()+"]";var k=Math.ceil($("#content").outerHeight());if(!context.savedToServerAuto){var h=layer.msg("正在保存...",{icon:16,shade:0.7,time:0})}$.ajaxSetup({contentType:"application/x-www-form-urlencoded; charset=utf-8"});$.post(context.host+"resume/save",{resumeId:context.resume,resumeNo:a,resumeNm:c,integr:g,height:k,resume:u,tplId:context.tplid,tplKey:context.tplkey,theme:context.theme,name:E,birthday:p||"",age:s,sex:o,mobile:e,email:v,job:m,years:y,major:w,school:t,edu:n,nation:d||"",from:x||"",shi:D||"",address:j||"",sheng:r||"",marital:f||"",polity:l||"",intro:C||"",format:B,page:context.page,cvlang:context.cvlang,fontSize:context.fontsize,fontColor:context.fontcolor,fontFamily:context.fontfamily,lineSpace:context.linespace,blockSpace:context.blockspace},function(G){G=$.parseJSON(G);if(1==G.retCode){context.pv("/resume/create");context.savedToServerFirst=true;layer.msg("保存成功");layer.close(H);var H=layer.msg("正在刷新简历...",{icon:16,shade:0.7,time:0});var F=context.host+"resume/detail/"+G.retText;if(!context.savedCovToServer){F=F+"#cover"}location.href=F}else{if(0==G.retCode){if(context.savedToServerAuto){layer.msg("已自动保存")}else{layer.msg("保存成功");layer.close(H)}context.savedToServer(true)}else{if(context.savedToServerAuto){layer.msg("自动保存失败")}else{layer.msg(G.retText);layer.close(H)}context.err("userId="+context.user+"tplId="+context.tplid+"&resumeId="+context.resume+"&name="+E+"&retText="+G.retText+"auto="+context.savedToServerAuto)}}b=null})});$(document).on("keydown",function(a){if(a.keyCode==83&&(a.metaKey||a.ctrlKey)){a.preventDefault();$("#operate-save").click()}});$("#operate-save").hover(function(){if(context.hasSavedToServer&&context.user){resumeSaveTips=layer.tips("简历已保存",this,{tips:[3,"#FFB800"],time:0,tipsMore:true})}},function(){if(context.hasSavedToServer&&context.user){layer.close(resumeSaveTips)}});$("#baseinfo").on("click",".baseinfo-value",function(){var b="";var e="";var d="";var a="";var f=$("#baseinfo").attr("format")||"row";f="en"==context.cvlang?"row":f;var c=layer.open({type:1,title:"en"==context.cvlang?'基本信息 <span class="layui-badge layui-bg-gray">英文简历</span>':"基本信息",content:$("#baseinfo-panel-"+context.cvlang),btn:["保存","取消"],shadeClose:true,area:"684px",success:function(x,p){x.addClass("layui-form");x.find(".layui-layer-btn0").attr("lay-filter","formVerify").attr("lay-submit","");x.find(".layui-layer-content").css("overflow","visible");var D=$('#baseinfo span[key="name"]').text();var t=$('#baseinfo span[key="sex"]').text();var u=$('#baseinfo span[key="age"]').attr("birthday");var w=$('#baseinfo span[key="age"]').text();var A=($('#baseinfo span[key="years"]').text()||"").replace("经验","");var s=$('#baseinfo span[key="edu"]').text();var k=$('#baseinfo span[key="mobile"]').text();var y=$('#baseinfo span[key="email"]').text();var r=$('#baseinfo span[key="job"]').text();var l=$('#baseinfo span[key="marital"]').text();var n=$('#baseinfo span[key="polity"]').text();var j=$('#baseinfo span[key="nation"]').text();var z=$('#baseinfo span[key="from"]').attr("val");var C=$('#baseinfo span[key="from"]').attr("shi");var m=$('#baseinfo span[key="address"]').attr("val");var v=$('#baseinfo span[key="address"]').attr("sheng");var B=$('#baseinfo span[key="intro"]').text()||$("#baseinfo").attr("intro");var h=$("#avater-wrapper").attr("data-show")||"show";var g=$('#baseinfo span[key^="custom"]');var q="";g.each(function(E){var G=$(this).text();var o=$(this).prev().text().replace("：","");if("col"==f){o=o.replace(/　/g,"")}else{var F=$(this).text().split("：");if(F.length>1){G=$(this).text().split("：")[1];o=$(this).text().split("：")[0]}else{G=$(this).text().split("：")[0];o=""}}q+='<div class="layui-inline"><label class="layui-form-label custom-label" contenteditable="true" placeholder="自定义标题">'+o+'</label><div class="layui-input-inline"><input type="text" name="custom'+(E+1)+'" value="'+G+'" lay-verify="limit" autocomplete="off" placeholder="自定义内容" class="layui-input"></div><span class="layui-badge custom-del">x</span></div>'});x.find(".baseinfo-custom").html(q);if(C){x.find('select[name="shi"]').html('<option value="'+C+'">'+C+"</option>")}if(m){x.find('select[name="address"]').html('<option value="'+m+'">'+m+"</option>")}if(u&&u<"1970/01"){u="1990/01"}layui.use(["form"],function(){var o='<option value="" selected>省</option>';for(var F in context.region.prov){var E=context.region.prov[F];o+='<option value="'+E+'">'+E+"</option>"}x.find('select[name="from"],select[name="sheng"]').html(o);var G=layui.form;x.find('input[name="name"]').val(D);x.find('select[name="sex"] option[value="'+t+'"]').attr("selected",true);x.find('input[name="birthday"]').val(u);x.find('input[name="birthday"]').attr("age",w);x.find('select[name="years"]').val(A);x.find('input[name="mobile"]').val(k);x.find('input[name="email"]').val(y);x.find('input[name="job"]').val(r);x.find('select[name="edu"]').val(s);x.find('select[name="marital"]').val(l);x.find('select[name="polity"]').val(n);x.find('select[name="nation"]').val(j);x.find('select[name="from"]').val(z);x.find('select[name="shi"]').val(C);x.find('select[name="address"]').val(m);x.find('select[name="sheng"]').val(v);x.find('select[name="photo"]').val(h);x.find('input[name="photo"][value="'+h+'"]').attr("checked",true);x.find('input[name="format"][value="'+f+'"]').attr("checked",true);if(-1!="tpl110|tpl117|tpl123|tpl124|tpl125".indexOf(context.tplkey)){x.find('input[name="format"][value="col"]').attr("checked",true);x.find('input[name="format"][value="row"]').attr("disabled",true)}if("en"==context.cvlang){x.find('input[name="format"][value="row"]').attr("checked",true);x.find('input[name="format"][value="col"]').attr("disabled",true)}G.render("radio","baseinfo");G.render("select","baseinfo");if(-1!="tpl110|tpl117|tpl123|tpl124|tpl125".indexOf(context.tplkey)){x.find('input[name="format"][value="row"]').next().on("click",function(){layer.msg("表格和双栏简历不支持简洁排版")})}if("en"==context.cvlang){x.find('input[name="format"][value="col"]').next().on("click",function(){layer.msg("英文简历不支持标准排版")})}setTimeout(function(){x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').removeAttr("readonly").removeClass("layui-unselect");x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').val(B);x.find('select[name="from"],select[name="shi"],select[name="sheng"],select[name="address"]').parent().css("width","95px")},100);G.verify({limit:function(H){if(H&&H.length>30){return"字数不能超过30"}},email:function(H){H=(H||"").replace(/(^\s*)|(\s*$)/g,"");if((H&&!(/^[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]*)*@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(H)))||H.length>100){return"邮箱格式不正确"}}});G.on("radio(format)",function(H){if("col"==H.value){x.find("form.layui-form div.layui-form-item:last-child").hide(0);f="col"}else{x.find("form.layui-form div.layui-form-item:last-child").show(0);f="row"}});if("col"==f){x.find("form.layui-form div.layui-form-item:last-child").hide(0)}else{x.find("form.layui-form div.layui-form-item:last-child").show(0)}G.on("select(from)",function(L){var H=x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').val();if(!L.value){x.find('select[name="shi"]').html('<option value="" selected>市</option>')}else{var K=context.region.city[L.value];var J='<option value="" selected>市</option>';for(var I in K){var M=K[I];J+='<option value="'+M+'">'+M+"</option>"}x.find('select[name="shi"]').html(J)}G.render("select","baseinfo");x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').removeAttr("readonly").removeClass("layui-unselect");x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').val(H)});G.on("select(sheng)",function(L){var H=x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').val();if(!L.value){x.find('select[name="address"]').html('<option value="" selected>市</option>')}else{var K=context.region.city[L.value];var J='<option value="" selected>市</option>';for(var I in K){var M=K[I];J+='<option value="'+M+'">'+M+"</option>"}x.find('select[name="address"]').html(J)}G.render("select","baseinfo");x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').removeAttr("readonly").removeClass("layui-unselect");x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').val(H)})});layui.use("laydate",function(){var E=layui.laydate;var o=E.render({elem:x.find('input[name="birthday"]').get(0),type:"month",format:"yyyy/MM",max:0,showBottom:false,ready:function(F){$(".editable-options").remove();$(".layui-laydate").off("mouseup").on("click",".laydate-month-list li",function(){$(".layui-laydate").remove()})},change:function(G,H,F){$('input[name="birthday"]').val(G)}})});x.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').off("click").on("click",function(){if($(this).parent().parent().hasClass("layui-form-selectup")&&$(this).val()){return false}});x.off("click",".custom-del").on("click",".custom-del",function(){$(this).parent().remove()});x.find("#baseinfo-more-btn").off("click").on("click",function(){if($(this).find("i").hasClass("icon-open")){x.find(".baseinfo-more").show();x.find("#baseinfo-add-btn").show();$(this).html('<i class="jlbfont icon-packup" style="font-size:12px!important;"></i> 收起可选字段')}else{x.find(".baseinfo-more").hide();x.find("#baseinfo-add-btn").hide();$(this).html('<i class="jlbfont icon-open" style="font-size:12px!important;"></i> 更多可选字段')}});x.find("#baseinfo-add-btn").off("click").on("click",function(){x.find(".baseinfo-more").show();var E=x.find(".baseinfo-custom input").size();var o='<div class="layui-inline"><label class="layui-form-label custom-label" contenteditable="true" placeholder="自定义标题"></label><div class="layui-input-inline"><input type="text" name="custom'+(E+1)+'" lay-verify="limit" autocomplete="off" placeholder="自定义内容" class="layui-input"></div><span class="layui-badge custom-del">x</span></div>';$(this).parent().prev().append($(o))})},yes:function(g,h){layui.use(["form"],function(){var j=layui.form;j.on("submit(formVerify)",function(u){b=u.field.name;e=u.field.mobile;d=u.field.email;a=u.field.job;$("#avater-wrapper").attr("data-show",u.field.photo);if(-1!="tpl124|tpl125".indexOf(context.tplkey)){$("#baseinfo-table").attr("data-show",u.field.photo)}if("hide"==u.field.photo){$("#baseinfo-panel-left").attr("data-width","100%")}else{$("#baseinfo-panel-left").removeAttr("data-width")}u.field.intro=h.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').val();if(-1!="tpl110|tpl117|tpl123|tpl124|tpl125".indexOf(context.tplkey)){for(var t in u.field){var A=u.field[t];if(A){if(t=="birthday"){var o=(new Date().getFullYear()-A.substring(0,4))+"岁";$('#baseinfo span[key="age"]').attr("birthday",A).text(o)}else{if("from"==t){var w=h.find('select[name="shi"]').val();$('#baseinfo span[key="from"]').attr("val",A).attr("shi",w).text(A+(w==A?"":w));if(-1=="tpl124|tpl125".indexOf(context.tplkey)){$('#baseinfo span[key="from"]').parent().removeAttr("style")}}else{if("address"==t){var r=h.find('select[name="sheng"]').val();$('#baseinfo span[key="address"]').attr("val",A).attr("sheng",r).text((r==A?"":r)+A);if(-1=="tpl124|tpl125".indexOf(context.tplkey)){$('#baseinfo span[key="address"]').attr("val",A).parent().removeAttr("style")}}else{if("sheng"!=t&&"shi"!=t&&"photo"!=t&&"format"!=t){$('#baseinfo span[key="'+t+'"]').text(A);if((-1=="tpl124|tpl125".indexOf(context.tplkey))&&"intro"!=t){$('#baseinfo span[key="'+t+'"]').parent().removeAttr("style")}}}}}}else{$('#baseinfo span[key="'+t+'"]').removeAttr("val").removeAttr("sheng").removeAttr("shi").text("");if(-1=="tpl124|tpl125".indexOf(context.tplkey)){$('#baseinfo span[key="'+t+'"]').parent().attr("style","display:none")}}}}else{var B="",y="",z="",q="",x="",p="";if("col"==f){for(var t in u.field){var A=u.field[t];var s=$('input[name="'+t+'"],select[name="'+t+'"]').attr("label");if(A){if(t=="birthday"){var o=(new Date().getFullYear()-A.substring(0,4))+"岁";z+=('<span class="baseinfo-row"><span class="baseinfo-label">'+s+'：</span><span class="baseinfo-value editable" key="age" val="'+o+'" birthday="'+A+'">'+o+"</span></span>")}else{if("from"==t){var w=h.find('select[name="shi"]').val();z+=('<span class="baseinfo-row"><span class="baseinfo-label">'+s+'：</span><span class="baseinfo-value editable" key="from" val="'+A+'" shi="'+w+'">'+A+(w==A?"":w)+"</span></span>")}else{if("address"==t){var r=h.find('select[name="sheng"]').val();z+=('<span class="baseinfo-row"><span class="baseinfo-label">'+s+'：</span><span class="baseinfo-value editable" key="address" val="'+A+'" sheng="'+r+'">'+(r==A?"":r)+A+"</span></span>")}else{if("job"==t){p='<span class="baseinfo-row"><span class="baseinfo-label">'+s+'：</span><span class="baseinfo-value editable" key="'+t+'">'+A+"</span></span>"}else{if("sheng"!=t&&"shi"!=t&&"intro"!=t&&"photo"!=t&&"format"!=t&&"job"!=t){if(-1!=t.indexOf("custom")){s=h.find('input[name="'+t+'"]').parent().prev().text().replace(/(^s*)|(s*$)/g,"");switch(s.length){case 2:s=s.substring(0,1)+"　　"+s.substring(1);break;case 3:s=s+"　";break}}z+=('<span class="baseinfo-row"><span class="baseinfo-label">'+s+'：</span><span class="baseinfo-value editable" key="'+t+'">'+A+"</span></span>")}}}}}}}z=z+p;var n=h.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').val();n=(n||"").replace(/(^\s*)|(\s*$)/g,"");if(n){$("#baseinfo").attr("intro",n)}}else{if(-1!=="tpl107|tpl126|tpl127|tpl131|tpl104|tpl116".indexOf(context.tplkey)){x=' style="color:#'+context.theme+';"';if("tpl131"==context.tplkey){x=' style="color:#'+context.theme+";border-bottom-color:#"+context.theme+';"'}}for(var t in u.field){var A=u.field[t];if(t=="name"){y='<span class="baseinfo-item baseinfo-title"'+x+'><span class="baseinfo-value editable" key="name">'+A+"</span></span>"}else{if(t=="intro"){var n=h.find('input[placeholder="一句话描述自己(不填自动隐藏)"]').val();n=(n||"").replace(/(^\s*)|(\s*$)/g,"");if(n){q='<span class="baseinfo-item baseinfo-intro"><span class="baseinfo-value editable" key="intro">'+n+"</span></span>"}else{q='<span class="baseinfo-item baseinfo-intro" style="display:none;"><span class="baseinfo-value editable" key="intro"></span></span>'}}else{if(A){if(t=="birthday"){var o=(new Date().getFullYear()-A.substring(0,4))+"岁";if("en"==context.cvlang){var o=(new Date().getFullYear()-A.substring(0,4))+"yrs Old"}z+=('<span class="baseinfo-value editable" key="age" val="'+o+'" birthday="'+A+'">'+o+"</span>")}else{if("years"==t){if("en"!=context.cvlang&&(-1=="应届生|在校生".indexOf(A))){A=A+"经验"}z+=('<span class="baseinfo-value editable" key="years">'+A+"</span>");if(u.field.edu){z+=('<span class="baseinfo-value editable" key="edu">'+u.field.edu+"</span>")}}else{if("from"==t){var w=h.find('select[name="shi"]').val();z+=('<span class="baseinfo-value editable" key="from" val="'+A+'" shi="'+w+'">籍贯'+A+"</span>")}else{if("address"==t){var r=h.find('select[name="sheng"]').val();z+=('<span class="baseinfo-value editable" key="address" val="'+A+'" sheng="'+r+'">现居'+A+"</span>")}else{if("job"==t){p='<span class="baseinfo-value editable" key="job">'+A+"</span>"}else{if("sheng"!=t&&"shi"!=t&&"photo"!=t&&"format"!=t&&"edu"!=t&&"job"!=t){var s="";if(-1!=t.indexOf("custom")){s=h.find('input[name="'+t+'"]').parent().prev().text();s=!s?"":s+"："}z+=('<span class="baseinfo-value editable" key="'+t+'">'+s+A+"</span>")}}}}}}}}}}z=z+p;$("#baseinfo").removeAttr("intro")}$("#baseinfo").attr("format",f);var m=$("<span>"+z+"</span>").find(".baseinfo-value").size();m="col"!=f?m+1:m;if(m>8){$("#baseinfo").attr("colnum","gt8")}else{$("#baseinfo").removeAttr("colnum")}B=y+'<span class="baseinfo-item baseinfo-fields">'+z+"</span>"+q;$("#baseinfo-panel-left").html(B)}if(b!="简历本"&&e!="13366668888"&&d!="user@jianliben.com"&&a!="应聘岗位"){$("#baseinfo").attr("initinfo","true");$("#resume-tips-panel input").val(a+" 范文")}$('tbody[key="intention"] .editable-left').text("➢ 岗位："+(a?a:"XX岗位"));context.savedToServer(false);context.integr.push(1);layer.close(g);return false})})}});context.trace("editor-baseinfo-baseopen")});if(!context.region){$.post(context.host+"common/region",{},function(a){try{context.region=$.parseJSON(a).data}catch(b){console.log(b);console.log(a)}})}$("body").on("click",".page-one-btn,.page-two-btn",function(){_pageH=1345;var a="缩成一页";if($(this).hasClass("page-two-btn")){_pageH=2690;a="缩成二页"}$("body").off("mouseenter","#page-line-one,#page-line-two");$(this).remove();var b=1.6;var d=15;var c=20;_callCounter=1;setAutoOnePage(b,d,c);context.integr.push(4);context.historyBak({parent:null,child:null,action:"onepage",text:a})});var _callCounter=1;var _pageH=1345;function setAutoOnePage(a,d,c){if(a<=0.2){return false}if((_callCounter%3==0)&&a<1.1){_callCounter++}if((_callCounter%3==1)||_callCounter%3==2){a=a-0.05;if(c>0){c=c-3}else{c=0}}if((_callCounter%3==0)&&d>12){d=d-0.2}setResumeLineSpace(a.toFixed(2));setResumeFontSize(d.toFixed(1));setResumeBlockSpace(c);var b=setTimeout(function(){context.savedToServer(false);showAndHidePageLine();var f=$("#content").outerHeight();if(f>_pageH){setAutoOnePage(a,d,c);_callCounter++}else{d=d+0.1;setResumeFontSize(d.toFixed(1));var e=setTimeout(function(){context.savedToServer(false);showAndHidePageLine();var h=$("#content").outerHeight();if(h>_pageH){d=d-0.1;setResumeFontSize(d.toFixed(1));var g=setTimeout(function(){context.savedToServer(false);showAndHidePageLine();clearTimeout(g)},300)}clearTimeout(e)},300)}clearTimeout(b)},300)}var downPanelIndex="";$("#operate-down").click(function(e){if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}context.pv("/download/open");context.trace("editor-operate-expopen");var a="";if("month"==context.vip){a="基础VIP"}else{if("year"==context.vip){a="基础VIP"}else{if("life"==context.vip){a="超级VIP"}}}var f='<span style="font-size:12px;">适合微信、QQ发送</span>';var g='<span style="font-size:12px;">适合打印、邮件发送</span>';var d='<span style="font-size:12px;">适合打印、本地编辑</span>';var c='<table id="resume-export-panel" style="border:0px;cellpadding:0px;font-size:13px;text-align:center;margin-top:40px;" align="center">';c+='<tr><td><button id="operate-img" class="layui-btn layui-btn-normal" style="left:5px;top:120px;background:#009688" data-trace="editor-export-downimg"><i class="layui-icon" style="font-size:20px;color:#fff;">&#xe64a;</i> 下载图片</button></td>';c+="<td>&nbsp;</td>";c+='<td><button id="operate-pdf" class="layui-btn layui-btn-normal" style="left:5px;top:120px;background:#FF5722" data-trace="editor-export-downpdf"><i class="jlbfont icon-pdf" style="font-size:17px;color:#fff;"></i> 下载PDF</button></td>';c+="<td>&nbsp;</td>";c+='<td><button id="operate-word" class="layui-btn layui-btn-normal" style="left:5px;top:120px;background:#5E8EE0" data-trace="editor-export-downword"><i class="jlbfont icon-word" style="font-size:18px;color:#fff;"></i> 下载Word</button></td></tr>';c+='<tr style="color:#888"><td style="padding:10px 0px">'+f+"</td>";c+='<td width="30">&nbsp;</td>';c+="<td>"+g+"</td>";c+='<td width="30">&nbsp;</td>';c+="<td>"+d+"</td></tr>";c+='<tr><td colspan="5" align="center" style="padding-top:20px"><span style="font-size:13px;color:#FFB800;"><i class="layui-icon" style="font-size:14px;font-weight:bold;">&#xe702;</i> 注意不要使用迅雷、旋风等第三方下载器下载！</span></td></tr>';c+="</table>";c+='<div style="background:#aaa;margin:30px -20px -20px;text-align:center;height:70px;line-height:70px">';c+='<label style="font-size:18px;line-height:18px;margin-right:30px;color:#fff;font-style:italic;">升级VIP，更多好功能！</label><button id="vip-btn" class="layui-btn layui-btn-primary" data-trace="editor-vip-vipdn" style="color:#1E9FFF"><i class="jlbfont icon-vip1" style="color:#FFB800;font-size:14px"></i> 升级VIP</button>';c+="</div>";var b="简历下载";if(context.vip){b='简历下载 <span class="layui-badge layui-bg-orange"><i class="jlbfont icon-vip1" style="font-size:12px;"></i>'+a+"</span>"}downPanelIndex=layer.open({type:1,title:b,content:c,area:"600px",shade:0.7,shadeClose:true})});$("body").on("click","#operate-img",function(){if(!context.user){context.pv("/download/img/unlogin");$("#header .jlb-login-link").click();return false}context.pv("/download/img");if(!context.vip&&parseInt(context.imgNum)<1){layer.msg("普通用户每天可下载1次图片，升级VIP不限下载数",{time:0,btn:["升级VIP","取消"],btn1:function(d,e){layer.close(d);$("#vip-link").click()},btn2:function(d,e){layer.close(d)}});context.pv("/download/img/secondlimit");return false}if(context.vip){context.pv("/download/img/vipdown")}else{context.pv("/download/img/firstfree")}var a=$("#resume-paper").find("img");var b=[];a.each(function(d){var g=$(this).attr("src");b[d]=g;if(g&&-1!=g.indexOf("thumb.")){var e=g.split(".com/");var f=e[e.length-1];$(this).attr("src",context.host+"export/imgstream?p="+f)}});$('<script type="text/javascript" src="'+context.res+'lib/fish/fishCanvas.js"><\/script>').appendTo($("body"));$(window).scrollTop(0);var c=layer.msg("正在生成图片简历...",{icon:16,shade:0.7,time:0});setTimeout(function(){try{html2canvas($("#content").prepend($("#cover").css("margin","0px")).get(0)).then(function(h){try{var g=h.toDataURL("image/jpeg",1);var j=$(".resume-name").text();if(!j){j="我的简历"}var f=$("#imgCvDown");if(f.size()<1){f=$('<a id="imgCvDown" href="'+g+'" download="'+j+'.jpg">').appendTo($("body"))}else{f.attr("href",g).attr("download",j+".jpg")}f[0].click();layer.close(c);if(!context.vip&&parseInt(context.imgNum)>0){context.imgNum=parseInt(context.imgNum)-1;$.get(context.host+"export/imgdown",{},function(e){})}}catch(k){a.each(function(e){$(this).attr("src",b[e])});$("#content").before($("#cover").removeAttr("style"));layer.close(c);layer.msg("下载失败！Windows系统自带的IE、Edge浏览器不支持图片下载，请使用其他浏览器！",{time:0,btn:["知道了"]})}a.each(function(e){$(this).attr("src",b[e])});$("#content").before($("#cover").removeAttr("style"))})}catch(d){a.each(function(e){$(this).attr("src",b[e])});$("#content").before($("#cover").removeAttr("style"));layer.close(c);layer.msg("下载失败！Windows系统自带的IE、Edge浏览器不支持图片下载，请使用其他浏览器！",{time:0,btn:["知道了"]})}},1500)});$("body").on("click","#operate-pdf",function(c){if(!context.user){context.pv("/download/pdf/unlogin");$("#header .jlb-login-link").click();return false}context.pv("/download/pdf");if(!context.vip){if(parseInt(context.score)<35){layer.msg("下载积分不足，请升级VIP",{time:0,btn:["升级VIP","取消"],btn1:function(d,e){layer.close(d);$("#vip-link").click()},btn2:function(d,e){layer.close(d)}});context.pv("/download/pdf/secondlimit");return false}context.pv("/download/pdf/firstfree")}else{if("life"!=context.vip&&parseInt(context.pdfNum)<1){layer.msg("PDF下载数已超出限额，升级超级VIP不限下载数",{time:0,btn:["升级超级VIP","取消"],btn1:function(d,e){layer.close(d);$("#vip-btn").click()},btn2:function(d,e){layer.close(d)}});return false}}var b=Math.ceil($("#content").outerHeight());if(2==context.tplpage&&b>1405){layer.confirm("您当前使用的是一页纸模板，简历内容已超出1页，下载后可能影响打印效果，建议将简历缩成1页或更换其它模板",{title:"提示",btn:["继续下载","更换模板","自动缩成1页"],shade:0.7,btn3:function(d,e){setAutoOnePage(1.6,15,20);layer.close(d);layer.close(downPanelIndex)}},function(d,e){a()},function(d,e){$("#resume-tpl").click();layer.close(d);layer.close(downPanelIndex)});return false}if("editor"==context.page){layer.confirm("您还未填写简历内容，导出内容为PDF模板，确定继续吗？",{title:"提示",btn:["继续下载","取消"]},function(d,e){a()},function(d,e){layer.close(d)});return false}context.pv("/download/pdf/vipdown");a();function a(){var d=layer.msg("正在生成PDF简历...",{icon:16,shade:0.7,time:0});$.ajax({type:"post",url:context.host+"export/export",data:{resume_id:context.resume,page:context.page,type:"pdf"},success:function(f){try{f=$.parseJSON(f)}catch(g){layer.msg("下载异常，请稍后再试");return false}if(!f){layer.msg("下载失败，请稍后再试");return false}if(0===f.retCode){$('form[name="exportForm"] input[name="exp"]').val(f.data.exp);$('form[name="exportForm"] input[name="sign"]').val(f.data.sign);d=layer.msg("正在准备下载...",{icon:16,shade:0.7,time:0});setTimeout(function(){layer.close(d);document.exportForm.submit();if(context.vip&&parseInt(context.pdfNum)>=1){context.pdfNum=parseInt(context.pdfNum)-1;if(("month"==context.vip)&&parseInt(context.pdfNum)<1){layer.msg("今日PDF下载数已用完，升级超级VIP不限下载数",{time:0,btn:["升级超级VIP","取消"],btn1:function(e,h){layer.close(e);$("#vip-btn").click()},btn2:function(e,h){layer.close(e)}})}}if(!context.vip&&parseInt(context.score)>=35){context.score=parseInt(context.score)-35}},1000)}else{layer.msg(f.retText)}},error:function(e){layer.msg("服务器异常，请稍后再试")}})}});$("body").on("click","#operate-word",function(a){if(!context.user){context.pv("/download/word/unlogin");$("#header .jlb-login-link").click();return false}context.pv("/download/word");if(!context.vip){if(parseInt(context.score)<100){layer.msg("下载Word为VIP权限，请升级VIP",{time:0,btn:["升级VIP","取消"],btn1:function(c,d){layer.close(c);$("#vip-link").click()},btn2:function(c,d){layer.close(c)}});context.pv("/download/word/firstlimit");return false}}else{if("life"!=context.vip&&parseInt(context.wordNum)<1){layer.msg("Word下载数已超出限额，升级超级VIP不限下载数",{time:0,btn:["升级超级VIP","取消"],btn1:function(c,d){layer.close(c);$("#vip-btn").click()},btn2:function(c,d){layer.close(c)}});return false}}context.pv("/download/word/vipdown");var b=layer.msg("正在生成Word简历...",{icon:16,shade:0.7,time:0});$.ajax({type:"post",url:context.host+"export/export",data:{resume_id:context.resume,page:context.page,type:"word"},success:function(c){try{c=$.parseJSON(c)}catch(d){layer.msg("下载异常，请稍后再试");return false}if(!c){layer.msg("下载失败，请稍后再试");return false}if(0===c.retCode){$('form[name="exportForm"] input[name="exp"]').val(c.data.exp);$('form[name="exportForm"] input[name="sign"]').val(c.data.sign);b=layer.msg("正在准备下载...",{icon:16,shade:0.7,time:0});setTimeout(function(){layer.close(b);document.exportForm.submit();if(context.vip&&parseInt(context.wordNum)>=1){context.wordNum=parseInt(context.wordNum)-1;if(parseInt(context.wordNum)<1){layer.msg("今日Word下载数已用完，升级超级VIP不限下载数",{time:0,btn:["升级超级VIP","取消"],btn1:function(e,f){layer.close(e);$("#vip-btn").click()},btn2:function(e,f){layer.close(e)}})}}if(!context.vip&&parseInt(context.score)>=100){context.score=parseInt(context.score)-100}},1000)}else{layer.msg(c.retText)}},error:function(c){layer.msg("服务器异常，请稍后再试")}})});$("#operate-import").click(function(){if(!context.user){$("#header .jlb-login-link").click();return false}if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var a="";if("month"==context.vip){a="基础VIP"}else{if("year"==context.vip){a="基础VIP"}else{if("life"==context.vip){a="超级VIP"}}}var c='<table id="resume-import-panel" style="border:0px;cellpadding:0px;font-size:13px;text-align:center;" align="center">';c+='<tr><td align="center" style="color:#aaa">导入已有简历，1秒钟简历大变身</td></tr>';c+='<tr><td><button id="operate-imp" class="layui-btn layui-btn-normal" style="margin-top:20px;">导入简历</button><br/></td></tr>';c+='<tr><td align="center" style="padding-top:20px"><span style="font-size:13px;color:#FFB800;"><i class="layui-icon" style="font-size:14px;font-weight:bold;">&#xe702;</i> 支持导入doc/docx/pdf/html/txt格式简历，2MB以内</span></td></tr>';c+="</table>";c+='<div class="layui-progress" lay-showpercent="true" style="margin:40px -20px -20px;border-radius:0px;" lay-filter="import"><div class="layui-progress-bar layui-bg-blue" lay-percent="0%" style="width:0%;border-radius:0px;"><span class="layui-progress-text" style="display:none;">0%</span></div></div>';var b="导入简历";if(context.vip){b='导入简历 <span class="layui-badge layui-bg-orange"><i class="jlbfont icon-vip1" style="font-size:12px;"></i>'+a+"</span>"}var d=layer.open({type:1,title:b,content:c,area:"450px",shade:0.7,shadeClose:true});layui.use(["upload","element"],function(){var f=layui.upload;var g=layui.element;var h={per:0,timer:null,setPercent:function(j){g.progress("import",j+"%");clearInterval(h.timer)},loading:function(j){h.timer=setInterval(function(){h.per=h.per+Math.random()*10|0;if(h.per>=100){h.per=100;clearInterval(h.timer)}g.progress("import",h.per+"%")},300+Math.random()*1000)}};var e=f.render({elem:"#operate-imp",url:context.host+"resume/import",before:function(j){if(!context.user){layer.msg("请先登录");return false}h.loadingIndex=layer.msg("正在上传...",{icon:16,shade:0.7,time:0});$("#resume-import-panel").next(".layui-progress").find(".layui-progress-text").show();$("#resume-import-panel").parent(".layui-layer-content").css("overflow-y","hidden");h.loading(5)},done:function(j){layer.close(h.loadingIndex);if(j&&j.retCode==0){h.setPercent(100);if("editor"==context.page){layer.confirm("导入成功！快去看看哪里还需要修改",{title:"提示",btn:["知道了"]},function(k,l){layer.close(k);var m=layer.msg("正在刷新简历...",{icon:16,shade:0.7,time:0});location.href=context.host+"resume/detail/"+j.retText+"#import"})}else{layer.confirm("导入成功！内容将覆盖当前简历，确定继续吗？",{title:"提示",btn:["确定导入","取消"]},function(k,l){layer.close(k);var m=layer.msg("正在刷新简历...",{icon:16,shade:0.7,time:0});location.hash="#import";location.reload()},function(k,l){layer.close(k)})}}else{h.setPercent(0);layer.msg(j.retText,{icon:2,anim:6})}},error:function(){layer.close(h.loadingIndex);h.setPercent(0);$("#resume-import-panel").next(".layui-progress").find(".layui-progress-text").hide();layer.msg("简历导入错误，请稍后再试",{icon:2,anim:6})},field:"file",accept:"file",exts:"doc|docx|pdf|html|txt",size:2*1024,data:{resumeId:context.resume,tplId:context.tplid,tplKey:context.tplkey,theme:context.theme,page:context.page,cvlang:context.cvlang}})})});$("#operate-send").click(function(g){if(!context.user){$("#header .jlb-login-link").click();return false}if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}if("editor"==context.page){layer.msg("请先完善简历");return false}var f=$('span.baseinfo-value[key="email"]').text()||"";var h=$('span.baseinfo-value[key="name"]').text()||"";var d=$('span.baseinfo-value[key="job"]').text()||"";var e='<div contenteditable="true" style="outline:none;"><span  class="mail_content">尊敬的<b style="font-style:italic;"></b>招聘负责人，您好！<br><br>我叫<b style="font-style:italic;">'+h+'</b>，现申请面试贵公司<b style="font-style:italic;">'+(d?d+"</b>岗位":"</b>")+'，以下是我的简历，请您查收！</span><div><br></div><div><br></div><div><br></div></div><div style="padding-top:20px;border-top:1px #e5e5e5 dashed;width:100%;">我的简历：<a href="'+$('input[name="resumeUrl"]').val()+'" target="_blank" style="text-decoration:underline;color:#1E9FFF;">'+$('input[name="resumeUrl"]').val()+"</a>";if($('input[name="resumeSec"]').val()==3){e+="&nbsp&nbsp&nbsp（密码: <span>"+$('input[name="resumePasswd"]').val()+"</span>）"}e+="</div>";var b='<form name=mail_form style="text-align:center;">';b+='<div style="background:#f5f5f5;width:800px;margin:20px auto 0px auto;">';b+='<div style="width:98%;border-bottom:1px #ddd solid;margin:0px auto;padding-top:15px;padding-bottom:5px;"><label style="color:#666">发件人　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><input type=text name=send_address placeholder=发件人邮箱  style="width:40%;padding:6px 5px;border:none;background:none;" value="'+f+'"><input type=text name=send_name placeholder=发件人名称 style="width:46%;padding:6px 5px;border:none;background:none;" value="'+h+'"></div>';b+='<div style="width:98%;border-bottom:1px #ddd solid;margin:0px auto;padding-top:15px;padding-bottom:5px;"><label style="color:#666">收件人　&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><input type=text name=mail_address placeholder=收件人邮箱  style="width:40%;padding:6px 5px;border:none;background:none;"><input type=text name=mail_name placeholder=收件人名称，如：华为公司  style="width:46%;padding:6px 5px;border:none;background:none;"></div>';b+='<div style="width:98%;margin:0px auto;padding-top:15px;padding-bottom:5px;"><label style="color:#666">邮件标题&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label><input type=text name=mail_subject placeholder="如：产品经理_产品经理_5年" style="width:87%;padding:6px 5px;border:none;background:none;" value="'+$('input[name="resumeName"]').val()+'"></div>';b+="</div>";b+='<div style="width:768px;min-height:180px;padding:30px 15px;margin:0px auto;text-align:left;border:1px #ddd solid;">'+e+"</div>";b+='<div style="width:800px;margin:10px auto 0px auto;">';b+='<span style="color:#666;display:inline-block;border:2px #ccc dashed;padding:8px 10px;float:left;background:#f8f8f8;" onmouseenter="addPdfTips=layer.tips(\'勾选发送PDF简历附件\', this, {tips:2,tipsMore:true})" onmouseleave="layer.close(addPdfTips)">附件：<i class="jlbfont icon-pdf" style="margin-right:3px;color:#FF5722;"></i>'+$('input[name="resumeName"]').val()+'.pdf &nbsp;&nbsp;&nbsp;<input type=checkbox name=mail_pdf style="vertical-align:middle;width:20px;height:20px;" /></span>';b+='<span style="color:#666;display:inline-block;border:2px #ccc dashed;padding:8px 10px;float:left;background:#f8f8f8;margin-left:20px;" onmouseenter="addWordTips=layer.tips(\'勾选发送Word简历附件\', this, {tips:2,tipsMore:true})" onmouseleave="layer.close(addWordTips)">附件：<i class="jlbfont icon-word" style="margin-right:3px;color:#5E8EE0;"></i>'+$('input[name="resumeName"]').val()+'.docx &nbsp;&nbsp;&nbsp;<input type=checkbox name=mail_word style="vertical-align:middle;width:20px;height:20px;" /></span>';b+='<span id="mail_tips" style="text-align:right;padding:10px 0px;color:#aaa;font-size:13px;display:inline-block;margin-top:30px;"><i class="layui-icon" style="font-size:14px;font-weight:bold;">&#xe702;</i> 注意：收件人邮箱填写错误或频繁发送邮件，可能会导致邮件发送失败</span>';b+="</div>";b+="</form>";var a="";if("month"==context.vip||"year"==context.vip){a="基础VIP"}else{if("life"==context.vip){a="超级VIP"}}var c="发送简历";if(context.vip){c='发送简历 <span class="layui-badge layui-bg-orange"><i class="jlbfont icon-vip1" style="font-size:12px;"></i>'+a+"</span>"}layer.open({type:1,title:c,content:b,shade:0.7,area:"880px",btn:["立即发送","取消"],shadeClose:true,yes:function(p,k){var r=document.mail_form.mail_subject.value;var t=document.mail_form.mail_address.value;var n=document.mail_form.send_address.value;var m=document.mail_form.mail_name.value;var q=$('form[name="mail_form"] .mail_content').html();var s=document.mail_form.mail_pdf.checked;var j=document.mail_form.mail_word.checked;if(!(/^[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]*)*@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(n))){layer.msg("发件邮箱格式不正确");return false}if(!(/^[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]*)*@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(t))){layer.msg("收件邮箱格式不正确");return false}if(r.length>100){layer.msg("邮件标题不能超过100字");return false}if($('input[name="mail_pdf"]').is(":checked")&&!context.vip){layer.msg("发送简历附件为VIP权限，请先升级VIP");return false}if($('input[name="mail_word"]').is(":checked")&&!context.vip){layer.msg("发送简历附件为VIP权限，请先升级VIP");return false}var l=layer.msg("正在发送...",{icon:16,shade:0.7,time:0});$.post(context.host+"resume/sendmail",{resume_id:context.resume,mail_to:t,mail_from:n,name_from:h,name_to:m,title:r,content:q,attach_pdf:s?1:0,attach_word:j?1:0},function(o){try{o=$.parseJSON(o)}catch(u){layer.msg("发送失败，请稍后再试");return false}if(!o){layer.msg("发送失败，请稍后再试");return false}if(0===o.retCode){layer.msg("发送成功");layer.close(p)}else{if(-2===o.retCode){layer.msg("发送成功，附件绑定失败")}else{if(-1===o.retCode){layer.msg(o.retText)}else{layer.msg("发送失败，请稍后再试")}}}})}});$('input[name="mail_pdf"], input[name="mail_word"]').change(function(){var j=$(this);if($(this).is(":checked")){if(!context.vip){layer.msg("发送附件为VIP权限，请先升级VIP",{time:0,btn:["升级VIP","取消"],btn1:function(k,l){layer.close(k);$("#vip-link").click()},btn2:function(k,l){layer.close(k)}},function(){j.attr("checked",false).parent().css("border-color","#CCC")})}j.parent().css("border-color","#1E9FFF")}else{j.parent().css("border-color","#CCC")}});$('input[name="mail_name"]').blur(function(){$('form[name="mail_form"]').find("b").eq(0).text($(this).val()||"")})});$("#resume-his").click(function(b){if($("#cover").attr("data-show")=="show"){$("html,body").animate({scrollTop:"1345px"},500)}var a='<p style="text-align:center;font-size:13px;color:#666;line-height:24px;border:1px #ddd dashed;padding:10px;width:80%;margin:0px auto;">按键<b>Ctrl+Z</b> 可<b>撤销</b>文字内容<br>按键<b>Ctrl+Y</b> 可<b>重做</b>文字内容</p>';a+='<ul class="layui-timeline" style="margin:25px 0px 0px 10px;"></ul>';var c=$.popup({title:"共<b> "+context.historyBakArr.length+" </b>条操作记录",content:a,width:"260px",side:"left",id:"resume-his-panel"});if(!c){return false}historyPanelRender()});function historyPanelRender(){var b="";for(var a=context.historyBakArr.length-1;a>=0;a--){b+='<li class="layui-timeline-item">';b+='<i class="layui-icon layui-timeline-axis">&#xe60e;</i>';b+='<div class="layui-timeline-content layui-text">';b+='<p class="layui-timeline-title">'+context.historyBakArr[a]["time"]+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+context.historyBakArr[a]["text"]+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";if(context.historyBakArr[a]["cancel"]){b+='<button class="layui-btn layui-btn-disabled layui-btn-xs" data-index="'+a+'" onclick="historyBakRestore(this);">已撤销</button></p>'}else{b+='<button class="layui-btn layui-btn-primary layui-btn-xs" data-index="'+a+'" onclick="historyBakRestore(this);" data-trace="editor-operate-hisredo">撤销</button></p>'}b+="</div>";b+="</li>"}$("#resume-his-panel ul").html(b)}function historyBakRestore(e){var c=parseInt($(e).attr("data-index"));var b=context.historyBakArr[c];var d=context.historyBakArr[c+1];if(d&&!d.cancel){layer.msg("请先撤销上一步操作");return false}switch(b.action){case"after":b.parent.after(b.child);break;case"before":b.parent.before(b.child);break;case"html":b.parent.html(b.child);b.parent.removeData("data-his");b.parent.removeData("data-hised");break;case"onepage":setResumeFontSize("15px");setResumeLineSpace("1.6em");setResumeBlockSpace("20px");setTimeout(function(){showAndHidePageLine()},300);break;case"describe":b.parent.removeAttr("data-desc");b.child.show();break;case"photo":b.parent.removeAttr("data-width");b.child.removeAttr("data-show");break}$(e).text("已撤销").removeClass("layui-btn-primary").addClass("layui-btn-disabled");context.historyBakArr[c].cancel=true;context.savedToServer(false);showAndHidePageLine()}function toolPanelClose(a){$(a).parent().parent().animate({left:-650},200,function(){$(this).remove()})}$("#operate-preview").click(function(){if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var a=$('<div id="cv-view-panel" style="position:fixed;width:100%;top:0px;bottom:0px;background:rgba(0, 0, 0, 0.9);z-index:1000;overflow:auto;"></div>').appendTo($("body"));a.append('<div id="cv-view-panel-x" style="position:fixed;width:30px;height:30px;top:10px;right:25px;cursor:pointer;color:#f8f8f8;transition:.2s linear"><i class="layui-icon" style="font-size:30px;">&#x1006;</i></div>');var e=null;if("show"==$("#cover").attr("data-show")){e=$("#cover").clone();e.find("i,button").remove();e.find(".cover-info,.baseinfo-label,.baseinfo-value").css("border-color","transparent");e.find(".baseinfo-label,.baseinfo-value").removeAttr("contenteditable");a.append(e.css("margin","15px auto").css("box-shadow","none"));e.find("img").on("contextmenu",function(){return false});e.find("img").on("dragstart",function(){return false})}var c=$("#content").clone().removeAttr("page");c.find("#avater-wrapper").find("#upload-btn").remove();c.find("#avater-wrapper").find("#upload-ldg").remove();c.find("#avater-wrapper").find("#photo-close-btn").remove();c.find("#avater-wrapper").find(".layui-upload-file").remove();c.find(".editable-options").remove();c.find(".content-corner").remove();c.find("a.add-del-btn:not(a.skill-del-btn)").remove();c.find(".editable").removeAttr("contenteditable");if(c.find("#baseinfo-panel-skill").attr("data-show")=="hide"){c.find("#baseinfo-panel-skill").css("display","none")}a.append(c.css("margin","15px auto").css("box-shadow","none"));var b=1350;var d=2695;if(1==context.tplpage){b=b-70;d=d-70}if("show"==$("#cover").attr("data-show")){b=b+1360;d=d+1360}if(c.height()>1345){$('<span style="position:absolute;top:'+b+'px;background:rgba(0, 0, 0, 0.9);color:#fff;font-size:12px;text-align:center;width:950px;left:50%;margin-left:-475px;height:5px;line-height:16px;"></span>').appendTo(a)}if(c.height()>2690){$('<span style="position:absolute;top:'+d+'px;background:rgba(0, 0, 0, 0.9);color:#fff;font-size:12px;text-align:center;width:950px;left:50%;margin-left:-475px;height:5px;line-height:16px;"></span>').appendTo(a)}$("html, body").css("overflow-y","hidden");$("#MEIQIA-BTN-HOLDER").css("display","none");$(".layui-layer-tips").css("z-index",100)});$("body").on("click","#cv-view-panel-x",function(){$("#cv-view-panel").remove();$("html, body").css("overflow-y","");$("#MEIQIA-BTN-HOLDER").css("display","block")}).on("mouseover","#cv-view-panel-x",function(){$(this).css("opacity",0.7);$(this).css("transform","rotate(180deg)")}).on("mouseout","#cv-view-panel-x",function(){$(this).css("opacity",1);$(this).css("transform","rotate(0deg)")});$("body").on("click","#cv-view-panel",function(a){if($.contains($(this).get(0),a.target)){return false}$("#cv-view-panel").remove();$("html, body").css("overflow-y","");$("#MEIQIA-BTN-HOLDER").css("display","block")});$("#operate-security").click(function(a){if(!context.user){$("#header .jlb-login-link").click();return false}if("editor"==context.page){layer.msg("请先完善简历");return false}layer.open({type:1,title:"隐私设置",content:$("#security-panel"),area:"500px",shade:0.7,shadeClose:true,success:function(c,b){layui.use(["form"],function(){var d=layui.form;d.on("radio(sec)",function(g){var f=g.value;var e=g.elem.title;if(1!=f&&2!=f&&3!=f){layer.msg("数据错误，设置失败");return false}$.post(context.host+"resume/setsec",{resume_id:context.resume,resume_sec:f},function(h){h=$.parseJSON(h);if(0==h.retCode){c.find("li.setting-item-resumesec .setting-item-right").attr("val",f);c.find("li.setting-item-resumesec .setting-item-right").text(e);$('input[name="resumeSec"]').val(f);if(3==f){c.find("li.setting-item-passwd").slideDown("fast")}else{c.find("li.setting-item-passwd").slideUp("fast");if(2==f){layer.msg("您已将简历设置为完全公开，任何人可通过简历地址查看您的简历",{time:0,btn:["知道了"]})}}}else{layer.msg(h.retText)}})})});c.find("li.setting-item-passwd a").off("click").on("click",function(){$.post(context.host+"resume/setpasswd",{resume_id:context.resume},function(d){d=$.parseJSON(d);if(0==d.retCode){c.find("li.setting-item-passwd .setting-item-center span").text(d.retText);$('input[name="resumePasswd"]').val(d.retText)}else{layer.msg(d.retText)}})});c.find("div.setting-item-center i.icon-copy").off("click").on("click",function(){var d=$(this).prev().text();if(window.clipboardData){window.clipboardData.clearData();clipboardData.setData("text",d);layer.msg("复制成功")}else{var g=$("<input />").val(d).appendTo($("body")).select();try{if(document.execCommand("Copy",false,null)){layer.msg("复制成功")}else{layer.msg("复制失败，请手动复制")}}catch(f){layer.msg("复制失败，请手动复制")}g.remove()}})}})});$("#operate-print").click(function(){if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var d='<link type="text/css" rel="stylesheet" href="'+context.res+'style/resume.css">';var b='<link type="text/css" rel="stylesheet" href="'+context.res+"style/tpl/"+context.tplkey+'.css">';var c="<style>html body{margin:0px;padding:0px;}#content{margin:0px auto;box-shadow:none;}table{font:inherit;}</style>";var a=$("#content").clone();a.find("#avater-wrapper").find("#upload-btn").remove();a.find("#avater-wrapper").find("#upload-ldg").remove();a.find("#avater-wrapper").find("#photo-close-btn").remove();a.find("#avater-wrapper").find(".layui-upload-file").remove();a.find(".block-tool-box, .field-tool-box").remove();context.print(a.prop("outerHTML"),d+b+c)});$("#header-top .resume-name").click(function(){if(!context.user){layer.msg("请先登录");return false}var b=$('input[name="resumeName"]').val()?$('input[name="resumeName"]').val():"未命名简历";var c='<div style="text-align:left;margin:15px auto 10px auto;color:#AAA;text-align:center;">给您的简历起个名字吧，如：产品经理_郭三刀_5年</div>';c+='<form name=resume_form style="text-align:center;height:30px;"><input type=text name=resume_name placeholder=产品经理_郭三刀_5年 style="width:80%;padding:6px 5px;border:1px solid #CCC;outline:none;box-shadow:inset 1px 1px 2px rgba(0,0,0,.1);" value="'+b+'"></form><br/><br/>';var a=layer.open({type:1,title:"设置简历名称",content:c,area:"420px",shade:0.7,btn:["确定"],yes:function(d,f){var e=document.resume_form.resume_name.value;if(e.length>30){layer.msg("简历名称不能超过30个字");return false}if(e.replace(/(^s*)|(s*$)/g,"").length==0){layer.msg("简历名称不能为空");return false}if("editor"==context.page){$(".resume-name").text(e);$('input[name="resumeName"]').val(e);layer.close(d);return false}$.post(context.host+"resume/setname",{resume_id:context.resume,resume_name:e},function(g){g=$.parseJSON(g);if(0==g.retCode){$(".resume-name").text(e);$('input[name="resumeName"]').val(e);layer.msg("简历名称设置成功");layer.close(d)}else{layer.msg(g.retText)}});return false}})});$(".resume-name").prev().click(function(){$(".resume-name").click()});$("#resume-style").click(function(){if($("#cover").attr("data-show")=="show"){$("html,body").animate({scrollTop:"1345px"},500)}var b='<div style="padding:10px;position:relative;width:240px;">';b+=('<div class="layui-card" id="jlb-style-fontsize"><div class="layui-card-header">字体大小</div><div class="layui-card-body layui-form" lay-filter="form-fontsize" style="padding-left:10px;"><div class="layui-form-item" style="width:195px;"><select name="fontsize" lay-filter="fontsize"><option value="12px">12</option><option value="13px">13</option><option value="14px">14</option><option value="15px">15 (默认)</option><option value="16px">16</option><option value="17px">17</option><option value="18px">18</option><option value="20px">20</option></select></div><div class="layui-slider-input layui-input" style="top:10px;right:15px;height:38px;line-height:38px;"><div class="layui-slider-input-btn"><i class="layui-icon layui-icon-up" style="line-height:20px;"></i><i class="layui-icon layui-icon-down" style="line-height:20px;"></i></div></div></div></div>');b+=('<div class="layui-card" id="jlb-style-fontfamily"><div class="layui-card-header">字体类型</div><div class="layui-card-body layui-form" lay-filter="form-fontfamily" style="padding-left:10px;"><div class="layui-form-item"><select name="fontfamily" lay-filter="fontfamily"><option value="STHeiti,SimHei">黑体</option><option value="STSong,SimSun">宋体</option><option value="STFangsong,FangSong">仿宋</option><option value="STKaiti,KaiTi">楷体</option><option value="Microsoft YaHei">微软雅黑</option><option value="Helvetica Neue">Helvetica (默认)</option><option value="Tahoma">Tahoma</option><option value="Georgia">Georgia</option></select></div></div></div>');b+=('<div class="layui-card" id="jlb-style-fontcolor"><div class="layui-card-header">字体颜色</div><div class="layui-card-body" style="padding-left:10px;padding-bottom:20px;position:relative;"><div class="slide-fontcolor" val="000000" style="background:#000000;border-left:5px #000 solid;"></div><div class="slide-fontcolor" val="111111" style="background:#111111;"></div><div class="slide-fontcolor" val="222222" style="background:#222222;"></div><div class="slide-fontcolor" val="333333" style="background:#333333;"></div><div class="slide-fontcolor" val="444444" style="background:#444444;"></div><div class="slide-fontcolor" val="555555" style="background:#555555;"></div><div class="slide-fontcolor" val="666666" style="background:#666666;"></div><div class="slide-fontcolor" val="777777" style="background:#777777;"></div><div class="slide-fontcolor" val="888888" style="background:#888888;"></div><div class="slide-fontcolor" val="999999" style="background:#999999;"></div><div class="slide-fontcolor" val="aaaaaa" style="background:#aaaaaa;"></div><div class="slide-fontcolor" val="bbbbbb" style="background:#bbbbbb;"></div><div class="slide-fontcolor" val="cccccc" style="background:#cccccc;"></div><div class="slide-fontcolor" val="dddddd" style="background:#dddddd;"></div><div class="slide-cursor" style="position:absolute;width:0px;height:0px;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:10px solid #1e9fff;bottom:18px;"></div></div></div>');b+=('<div class="layui-card" id="jlb-style-linespace"><div class="layui-card-header">段落行距</div><div class="layui-card-body"><div id="slide-linespace" style="margin:10px 0px 30px 0px;"></div></div></div>');b+=('<div class="layui-card" id="jlb-style-blockspace"><div class="layui-card-header">模块间距</div><div class="layui-card-body"><div id="slide-blockspace" style="margin:10px 0px 30px 0px;"></div></div></div>');b+="</div>";var a=$.popup({title:"内容样式",content:b,width:"260px",side:"left",id:"resume-style-panel"});if(!a){return false}layui.use(["slider","form"],function(){var d=layui.slider;var c=layui.form;if("."==context.fontsize.substr(context.fontsize.length-4,1)){$("#jlb-style-fontsize").find('select[name="fontsize"]').prepend('<option value="'+context.fontsize+'">'+parseFloat(context.fontsize)+"</option>")}$("#jlb-style-fontsize").find('select[name="fontsize"]').val(context.fontsize);c.render(null,"form-fontsize");c.on("select(fontsize)",function(g){setResumeFontSize(g.value);setTimeout(function(){context.savedToServer(false);showAndHidePageLine();context.integr.push(4)},200)});$("#jlb-style-fontsize").off("click").on("click",".layui-slider-input-btn .layui-icon",function(){var g=parseFloat(context.fontsize);if($(this).hasClass("layui-icon-up")){g=parseFloat(g+0.1).toFixed(1)}else{g=parseFloat(g-0.1).toFixed(1)}if(g>20||g<12){return false}g=g.toString();if("0"==g.substr(g.length-1,1)){g=parseInt(g)}$("#jlb-style-fontsize").find(".layui-select-title .layui-input").val(g);setResumeFontSize(g+"px");setTimeout(function(){context.savedToServer(false);showAndHidePageLine();context.integr.push(4)},200)});$("#jlb-style-fontfamily").find('select[name="fontfamily"]').val(context.fontfamily);var f=$("#jlb-style-fontfamily").find('option[value="'+context.fontfamily+'"]').text();c.render(null,"form-fontfamily");c.on("select(fontfamily)",function(g){setResumeFontFamily(g.value);context.savedToServer(false);context.integr.push(4)});var e=$("#jlb-style-fontcolor .slide-fontcolor").index($('.slide-fontcolor[val="'+context.fontcolor+'"]'));$("#jlb-style-fontcolor .slide-cursor").css("left",(15*e+18)+"px");$("#jlb-style-fontcolor").off("click").on("click",".slide-fontcolor",function(){e=$("#jlb-style-fontcolor .slide-fontcolor").index($(this));$("#jlb-style-fontcolor .slide-cursor").css("left",(15*e+18)+"px");setResumeFontColor($(this).attr("val"));context.savedToServer(false);context.integr.push(4)});d.render({elem:"#slide-linespace",input:true,theme:"#1e9fff",min:120,max:500,step:5,value:parseFloat(context.linespace)*100,setTips:function(g){return g/100},change:function(g){if((g+"em")==context.linespace){return false}setResumeLineSpace(g+"em");setTimeout(function(){context.savedToServer(false);showAndHidePageLine();context.integr.push(4)},200)}}).setValue((parseFloat(context.linespace)*100-120)/5);d.render({elem:"#slide-blockspace",input:true,theme:"#1e9fff",min:0,max:100,step:1,value:parseInt(context.blockspace),setTips:function(g){return g},change:function(g){if((g+"px")==context.blockspace){return false}setResumeBlockSpace(g+"px");setTimeout(function(){context.savedToServer(false);showAndHidePageLine();context.integr.push(4)},200)}}).setValue(parseInt(context.blockspace))})});function setResumeFontSize(a){a=a.toString();if(-1==a.indexOf("px")){a=a+"px"}$("#field-list").css("font-size",a);$("#baseinfo").css("font-size",a);$("#field-list").attr("fontsize",a);context.fontsize=a;context.trace("editor-style-fontsize")}function setResumeFontColor(a){a=a.toString();if(-1!=a.indexOf("#")){a=a.substring(1)}if("666666"==a){$("#field-list").css("color","");$("#baseinfo").css("color","")}else{$("#field-list").css("color","#"+a);$("#baseinfo").css("color","#"+a)}$("#field-list").attr("fontcolor",a);context.fontcolor=a;context.trace("editor-style-fontcolor")}function setResumeFontFamily(a){a=a.toString();if("Helvetica Neue"==a){$("#field-list").css("font-family","");$("#baseinfo").css("font-family","")}else{$("#field-list").css("font-family",a);$("#baseinfo").css("font-family",a)}$("#field-list").attr("fontfamily",a);context.fontfamily=a;context.trace("editor-style-fontfamily")}function setResumeLineSpace(a){a=a.toString();if(-1==a.indexOf("em")){a=a+"em"}if("1.6em"==a){$("tbody:not(#baseinfo) .field-value-span .editable").css("line-height","")}else{$("tbody:not(#baseinfo) .field-value-span .editable").css("line-height",a)}$("#field-list").attr("linespace",a);context.linespace=a;context.trace("editor-style-linespace")}function setResumeBlockSpace(a){a=a.toString();if(-1==a.indexOf("px")){a=a+"px"}if("20px"==a){$("#resume-paper tbody").each(function(c){if("baseinfo"==$(this).attr("id")||c==$("#resume-paper tbody").size()-1){return true}var b=$(this).find(".field-value-span");if(b.size()>0){b.eq(b.size()-1).css("margin-bottom","")}})}else{$("#resume-paper tbody").each(function(c){if("baseinfo"==$(this).attr("id")||c==$("#resume-paper tbody").size()-1){return true}var b=$(this).find(".field-value-span");if(b.size()>0){b.eq(b.size()-1).css("margin-bottom",a)}})}$("#field-list").attr("blockspace",a);context.blockspace=a;context.trace("editor-style-blockspace")}$("#resume-tool").hover(function(){$("#resume-tool-panel").slideDown(50)},function(){$("#resume-tool-panel").slideUp(50)});$("#resume-tool-panel .jlb-tool").click(function(){$this=$(this);$this.parent().hide();if($this.hasClass("tool-letter")||$this.hasClass("tool-picture")){layer.msg("功能开发中，敬请期待...")}});$("#resume-tool-panel .tool-translate").click(function(){var a='<div style="padding:20px 10px;position:relative;">';a+='<textarea style="display:block;width:225px;height:120px;border:1px #dbe4ff inset;font-size:13px;padding:5px;overflow-x:auto;overflow-y:hidden;" placeholder="输入或选取要翻译的内容..."></textarea>';a+='<button class="layui-btn layui-btn-normal jlb-btn-translate" style="width:237px;border-radius:0px;">翻译</button>';a+='<div style="width:225px;min-height:120px;background:#f8f8f8;border:1px #dbe4ff solid;padding:5px;font-size:13px;"></div>';a+='<div style="position:absolute;width:55px;height:20px;top:230px;left:100px;background:url('+context.res+'lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat;display:none;"></div>';a+="</div>";var b=$.popup({title:"翻译助手",content:a,width:"260px",side:"left",id:"resume-dic-panel"});if(!b){return false}b.find(".jlb-btn-translate").off("click").on("click",function(){var d=$(this).prev();var c=$(this).next();var f=$(this).next().next();var e=d.val();if(!e){d.css("border-color","red");setTimeout(function(){d.css("border-color","#DBE4FF")},1000);return}f.show();$.post(context.host+"common/translate",{text:e},function(g){g=$.parseJSON(g);if(0===g.retCode){c.html(g.retText)}else{c.html("<font color=red>"+g.retText+"</font>")}f.hide()})})});$("#content").on("mouseup",".editable",function(){if($("#resume-dic-panel").size()>0){var a="";if(window.getSelection){a=window.getSelection().toString()}else{a=document.selection.createRange().text}if(a){$("#resume-dic-panel textarea").val(a.replace(/\n/g," "));$("#resume-dic-panel .jlb-btn-translate").click()}}});$("#resume-tool-panel .tool-checktext").click(function(){var b='<div style="padding:20px 10px;position:relative;text-align:center;">';b+='<button class="layui-btn layui-btn-normal jlb-btn-checktext" style="width:120px;">开始纠错</button>';b+='<div style="width:235px;margin:30px 0px;font-size:13px;color:#aaa;">一键检测简历中的错别字</div>';b+='<div style="width:225px;min-height:120px;background:#f8f8f8;border:1px #dbe4ff solid;padding:10px 5px;font-size:13px;" placeholder="无检测结果"></div>';b+='<div style="position:absolute;width:55px;height:20px;top:170px;left:100px;background:url('+context.res+'lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat;display:none;"></div>';b+="</div>";var a=$.popup({title:"智能纠错",content:b,width:"260px",side:"left",id:"resume-txt-panel"});if(!a){return false}a.find(".jlb-btn-checktext").off("click").on("click",function(){var c=$(this).next().next();var e=$(this).next().next().next();var d="";$("#content").find(".editable-one-column").each(function(){d+=$.trim($(this).text())});if(!d){return false}e.show();$.post(context.host+"common/checktext",{text:d},function(j){var f=$.parseJSON(j);if(0===f.retCode){var h="";for(var g in f.data){h+=('<p><font color="red">'+f.data[g].src_text+'</font> => <font color="green">'+f.data[g].ret_text+"</font></p>")}c.html(h)}else{layer.msg(f.retText);c.html("")}e.hide()})})});$("#resume-tpl").click(function(){if($("#cover").attr("data-show")=="show"){$("html,body").animate({scrollTop:"1345px"},500)}var a=$.popup({title:'更换模板<font style="color:#bbb;font-size:12px;">&nbsp;&nbsp;&nbsp;不会覆盖已填写的内容</font>',content:"",width:"350px",side:"left",id:"resume-tpl-panel"});if(!a){return false}a.css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat");$.post(context.host+"resume/tpllist",{},function(e){e=$.parseJSON(e).data;var b="";b+='<ul class="tpl-switch">';for(var c in e){var d="";d+='<li class="tpl-item" tplid="'+e[c]["tpl_id"]+'" tplkey="'+e[c]["tpl_key"]+'">';d+='<img src="'+context.thumb+"tplimg/"+e[c]["tpl_image"]+'" width="136" />';d+='<div class="tpl-item-back">';d+='<button class="tpl-item-btn layui-btn layui-btn-normal">更换</button>';d+='<p class="tpl-item-tplno layui-badge layui-bg-gray">'+e[c]["tpl_no"]+"</p>";if(2==e[c]["tpl_page"]){d+='<p class="layui-badge layui-bg-gray" style="border-radius:0 0 3px 0">一页纸</p>'}d+="</div>";d+="</li>";b+=d}b+="</ul>";a.find(".fish-popup-content").append(b);a.css("background","")});a.off("click").on("click","li",function(){if(!context.hasSavedToServer){layer.msg("简历有改动，请先保存简历");return false}var g=$(this).attr("tplid");var b=$(this).attr("tplkey");if(("en"==context.cvlang)&&-1!="tpl106|tpl110|tpl117|tpl123|tpl124|tpl125".indexOf(b)){layer.msg("该模板暂不支持英文版");return false}var e=$("#avater-wrapper").attr("data-show")||"show";var c=$("#baseinfo").attr("format")||"row";if(context.user&&"editor"!=context.page){var f=layer.msg("正在切换...",{icon:16,shade:0.7,time:0});$.post(context.host+"resume/switch",{resume_id:context.resume,tpl_id:g},function(h){h=$.parseJSON(h);if(0==h.retCode){location.hash="#switch";location.reload()}else{layer.msg(h.retText)}})}else{var d=location.href.split("?")[1]||"";var d=d.replace(context.tplkey,b)||("t="+b);location.href=context.host+"editor/?"+d}})});$("#resume-theme").on("click",function(a){if($("#cover").attr("data-show")=="show"){$("html,body").animate({scrollTop:"1345px"},500)}$("#resume-theme-panel").slideToggle(50)});$("#resume-theme-panel").on("click",".resume-theme",function(b){var a=$(this).attr("data-val");changeTheme("#"+a);$("#resume-theme-panel .resume-theme").removeClass("resume-theme-this");$(this).addClass("resume-theme-this");b.stopPropagation()}).on("mouseleave",function(){$("#resume-theme-panel").slideUp(50)});if("editor"==context.page){if(context.tplcon){if(context.user){layui.use(["layer"],function(){$("#header-top .resume-name").click()})}}else{if(context.cvnum>=10){layui.use(["layer"],function(){layer.msg("简历创建数已达上限，请删除一份后再创建",{time:0,btn:["管理简历"],btnAlign:"c",shade:0.5,btn1:function(a,b){location.href=context.host+"profile"}})})}else{layui.use(["layer","form"],function(){var c=layui.form;var b='<form class="layui-form" lay-filter="cvoptions" action=""><div class="layui-form-item" style="margin:20px 30px 30px 30px;text-align:center;"><div class="layui-inline" style="margin:10px 0px;"><div class="layui-input-inline inline-cvtype" style="width:400px" data-trace="editor-click-cvtype"><input type="checkbox" lay-filter="cvtype" value="student" title="学生简历"><input type="checkbox" lay-filter="cvtype" value="working" title="职场简历" checked="true"></div></div><div class="layui-inline" style="margin:10px 0px;"><div class="layui-input-inline inline-cvlang" style="width:400px" data-trace="editor-click-cvlang"><input type="checkbox" lay-filter="cvlang" value="zh"'+("zh"==context.cvlang?' checked="true"':"")+' title="中文简历"><input type="checkbox" lay-filter="cvlang" value="en"'+("en"==context.cvlang?' checked="true"':"")+' title="英文简历"></div></div><div class="layui-inline" style="margin:10px 0px;"><div class="layui-input-inline" style="margin:0px;width:310px" data-trace="editor-click-cvname"><input type="text" name="init_resume_name" lay-verify="limit" autocomplete="off" placeholder="简历名称，如：产品经理_郭三刀" class="layui-input"></div></div></div></form><div style="margin:-15px auto;text-align:center;color:#bbb;font-size:13px;">系统将根据您选择的类型和语言生成模板内容</div><style>a.start-edit-resume{height:38px;line-height:38px;padding:0 30px;font-size:18px;margin-bottom:20px;}.layui-form-pane .layui-form-label{color:#888;}.layui-form-checkbox span{padding:0px 25px;}</style>';var a=layer.open({type:1,title:"",content:b,anim:2,shade:0.7,area:"500px",btn:["开始写简历"],btnAlign:"c",closeBtn:false,success:function(e,d){c.render(null,"cvoptions");e.find(".layui-form-label").css("color","#888");e.find(".layui-form-checkbox").css("margin","0px 20px");e.find(".layui-layer-content").css("overflow","visible");e.find(".layui-layer-btn0").addClass("start-edit-resume").attr("data-trace","editor-click-cvbegin");e.find(".inline-cvtype .layui-form-checkbox").off("click").on("click",function(){if(!$(this).hasClass("layui-form-checked")){e.find(".inline-cvtype .layui-form-checkbox").removeClass("layui-form-checked");$(this).addClass("layui-form-checked")}else{return false}var f=$(this).parent().find('input[title="'+$(this).text()+'"]').val();context.cvtype=f||context.cvtype});e.find(".inline-cvlang .layui-form-checkbox").off("click").on("click",function(){var f=$(this).parent().find('input[title="'+$(this).text()+'"]').val();if(("zh"==context.tpllang)&&("en"==f)){layer.msg("该模板暂不支持英文简历",{time:0,btn:["知道了","更换模板"],btn1:function(g,h){layer.close(g)},btn2:function(g,h){layer.close(g);layer.close(a);$("#resume-tpl").click()}});return false}if(("en"==context.tpllang)&&("zh"==f)){layer.msg("该模板暂不支持中文简历",{time:0,btn:["知道了","更换模板"],btn1:function(g,h){layer.close(g)},btn2:function(g,h){layer.close(g);layer.close(a);$("#resume-tpl").click()}});return false}if(!$(this).hasClass("layui-form-checked")){e.find(".inline-cvlang .layui-form-checkbox").removeClass("layui-form-checked");$(this).addClass("layui-form-checked")}else{return false}context.cvlang=f||context.cvlang});e.find('input[name="init_resume_name"]').off("change").on("change",function(){var f=$(this).val();f=(f||"").replace(/(^\s*)|(\s*$)/g,"")||"未命名简历";$("span.resume-name").text(f)});context.trace("editor-click-cvfirst")},yes:function(d,e){initResumeByTypeAndLang(context.cvtype,context.cvlang);layer.tips("已有简历可直接导入",$("#operate-import"),{tips:[3,"#FFB800"],time:0,fixed:true,tipsMore:true,closeBtn:true,success:function(g,f){g.find(".layui-layer-close").css("top","-3px").css("right","-8px").attr("data-trace","editor-import-tipsclose")}});layer.close(d);return false}})});function initResumeByTypeAndLang(m,c){if("student"==m){var j=getTbodyByBlockTitle("work");var f=getTbodyByBlockTitle("practice");var k=getTbodyByBlockTitle("project");j.remove();k.remove();f.find(".field-add-btn").attr("data-scroll","true").click();f.find(".field-add-btn").removeAttr("data-scroll")}else{var a=getTbodyByBlockTitle("education");var j=getTbodyByBlockTitle("work");var f=getTbodyByBlockTitle("practice");var k=getTbodyByBlockTitle("project");var l=getTbodyByBlockTitle("honer");var n=getTbodyByBlockTitle("hobby");a.find(".field-value-span").attr("data-desc","hide");f.remove();k.remove();l.remove();n.remove();j.find(".field-add-btn").attr("data-scroll","true").click();j.find(".field-add-btn").removeAttr("data-scroll")}if("en"==c){context.cvlang="en";$("#header-top .header-top-center .layui-badge").eq(1).text("英文简历");for(var h in context.blocktitle.zh){$('tbody .field-title-td .editable:contains("'+context.blocktitle.zh[h]+'")').text(context.blocktitle.en[h])}if("col"==$("#baseinfo").attr("format")){var e="";if(-1!=="tpl107|tpl126|tpl127|tpl131|tpl104|tpl116".indexOf(context.tplkey)){e=' style="color:#'+context.theme+';"';if("tpl131"==context.tplkey){e=' style="color:#'+context.theme+";border-bottom-color:#"+context.theme+';"'}}var g='<span class="baseinfo-item baseinfo-title"'+e+'><span class="baseinfo-value editable" key="name">Your Name</span></span>';g+='<span class="baseinfo-item baseinfo-fields">';g+='<span class="baseinfo-value editable" key="sex">Male</span>';g+='<span class="baseinfo-value editable" key="age" val="20" birthday="1999/12">20yrs Old</span>';g+='<span class="baseinfo-value editable" key="mobile">13366668888</span>';g+='<span class="baseinfo-value editable" key="email">user@jianliben.com</span>';g+='<span class="baseinfo-value editable" key="job">Job Intention</span>';g+="</span>";g+='<span class="baseinfo-item baseinfo-intro"><span class="baseinfo-value editable" key="intro">Introduce yourself in one sentence.</span></span>';$("#baseinfo-panel-left").html(g)}else{$('#baseinfo span.baseinfo-value[key="name"]').text("Your Name");$('#baseinfo span.baseinfo-value[key="sex"]').text("Male");$('#baseinfo span.baseinfo-value[key="age"]').text("20yrs Old").attr("birthday","1999/12");$('#baseinfo span.baseinfo-value[key="years"]').text("working"==m?"3yrs Exp.":"Graduates").remove();$('#baseinfo span.baseinfo-value[key="edu"]').text("Bachelor's degree").remove();$('#baseinfo span.baseinfo-value[key="mobile"]').text("13366668888");$('#baseinfo span.baseinfo-value[key="email"]').text("user@jianliben.com");$('#baseinfo span.baseinfo-value[key="job"]').text("Job intention");$('#baseinfo span.baseinfo-value[key="intro"]').text("Introduce yourself in one sentence.")}var b=getTbodyByBlockTitle("intention");b.find(".editable").eq(1).html("<div>➢ Job intention</div>");b.find(".editable").eq(2).html("<div>➢ Expected salary</div>");b.find(".editable").eq(3).html("<div>➢ Expected location</div>");b.find(".editable").eq(4).html("<div>➢ Expected type</div>");var d=getTbodyByBlockTitle("skill");d.find(".skill-level-word").each(function(){$(this).text("Good")})}else{$('#baseinfo span.baseinfo-value[key="name"]').text("简历本");$('#baseinfo span.baseinfo-value[key="sex"]').text("男");$('#baseinfo span.baseinfo-value[key="age"]').text("20岁").attr("birthday","1999/12");$('#baseinfo span.baseinfo-value[key="years"]').text("working"==m?"3年经验":"应届生");$('#baseinfo span.baseinfo-value[key="edu"]').text("本科");$('#baseinfo span.baseinfo-value[key="mobile"]').text("13366668888");$('#baseinfo span.baseinfo-value[key="email"]').text("user@jianliben.com");$('#baseinfo span.baseinfo-value[key="job"]').text("应聘岗位")}}function getTbodyByBlockTitle(a){var b=context.blocktitle[context.cvlang][a];return $('tbody .field-title-td .editable:contains("'+b+'")').parent().parent().parent().parent()}}}}$("#content").on("click",".desc-how-btn",function(){$("#sidemenu-right .sm-right-fanwen").click();context.trace("editor-block-deschow")});$("#sidemenu-right .sm-right-fanwen").click(function(){var a='<div class="tips-content" style="padding:20px;position:relative;"><div class="jlb-search-box" style="text-align:center;position:relative;"><input type="text" name="search-input" class="layui-input" placeholder="自我评价怎么写" style="display:inline-block;margin:20px 0px 50px 0px;"><span class="jlb-search"><i class="layui-icon">&#xe615;</i></span></div><ul class="tips-cate"></ul></div>';var b=$.popup({title:"简历贴士",content:a,width:"400px",side:"right",id:"resume-tips-panel"});if(!b){return false}b.css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat");$.ajax({type:"post",url:"/resume/cvtips",data:{},async:false,dataType:"json",success:function(d){if(d.retCode==0){var c="";$.each(d.data.tips,function(f,g){c+='<li><span class="tips-cate-title">'+d.data.cate[f]+'<i class="jlbfont icon-next"></i></span>';c+='<div class="tips-cate-child"><dl>';for(var e=0;e<g.length;e++){c+='<dd class="layui-btn layui-btn-sm layui-btn-primary">'+g[e].title+"</dd>"}c+='</dl><div class="tips-cate-text">';for(var e=0;e<g.length;e++){c+='<div class="tips-cate-area">'+g[e].content+"</div>"}c+="</div></div></li>"});$("#resume-tips-panel .tips-cate").html(c)}else{layer.msg("查询失败，请联系客服")}b.css("background","")}});$("#resume-tips-panel").off("click");$("#resume-tips-panel").on("click",".tips-cate-title",function(){$("#resume-tips-panel li").removeClass("curr-tips");$(this).parent().addClass("curr-tips");$("#resume-tips-panel li:not(.curr-tips) .tips-cate-child").hide();$("#resume-tips-panel li:not(.curr-tips) .tips-cate-title i").removeClass("icon-open");$(this).parent().find(".tips-cate-child").toggle();$(this).find("i").toggleClass("icon-open");$(this).parent().find(".tips-cate-child dd").eq(0).click();$("#resume-tips-panel").get(0).scrollTo(0,0)});$("#resume-tips-panel").on("click",".tips-cate-child dd",function(){var c=$("#resume-tips-panel .tips-cate-child dd").index($(this));$("#resume-tips-panel .tips-cate-text div").hide();$("#resume-tips-panel .tips-cate-text div:eq("+c+")").show();$(this).parent().find("dd.curr").removeClass("curr");$(this).addClass("curr")})});$("#sidemenu-right .sm-right-shipin").click(function(){var a='<div class="tips-content" style="padding-bottom:20px;"><ul class="layui-timeline"></ul></div>';var b=$.popup({title:"简历微课",content:a,width:"460px",side:"right",id:"resume-shipin-panel"});if(!b){return false}b.css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat");$.ajax({type:"post",url:"/resume/video",data:{},async:false,dataType:"json",success:function(d){if(d.retCode==0){var c="";$.each(d.data,function(e,f){c+='<li class="timeline-item">';c+='<img class="j_open_video" data-id="'+f.v_id+'" data-dir="'+f.video_dir+'" src="'+context.thumb+"artimg/"+f.video_img+'" >';c+='<div class="resume-shipin-bg"><i class="layui-icon" style="font-size:40px;color:#fff;">&#xe652;</i></div>';c+="<span>"+f.video_title+"</span>";c+='<span><p style="display:inline-block;float:left;font-size:12px;color:#888;">'+f.view_count+'人看过</p><p style="display:inline-block;float:right;font-size:12px;color:#666;">'+f.video_author+"</p></span></li>"});$("#resume-shipin-panel .layui-timeline").html(c)}else{layer.msg("查询失败，请联系客服")}b.css("background","")}});$("#resume-shipin-panel").off("click").on("click",".resume-shipin-bg",function(){var c=$(this).prev().data("dir");var d='<video  src="'+context.thumb+"upload/"+c+'" controls="controls" autoplay="autoplay" style="height:100%;outline:none;"></video>';layer.open({type:1,title:false,content:d,area:["1000px","540px"],shade:0.7,shadeClose:true,success:function(e,f){e.find(".layui-layer-content").css("background","#000").css("text-align","center").css("padding","0px").css("overflow","hidden").css("height","550px")}})})});$("#sidemenu-right .sm-right-advisor").click(function(){var a='<div class="tips-content" style="padding-bottom:20px;"><ul class="layui-timeline"></ul></div>';var b=$.popup({title:"简历定制",content:a,width:"460px",side:"right",id:"resume-advisor-panel"});if(!b){return false}b.css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat");$.ajax({type:"post",url:"/resume/advisor",data:{},async:false,dataType:"json",success:function(d){if(d.retCode==0){var c="";$.each(d.data,function(e,f){c+='<li class="timeline-item">';c+='<div class="title">';c+='<img data-dir="'+f.photo+'" src="'+context.thumb+"photo/"+f.photo+'" >';c+="   <span>"+f.nickname+"</span>";c+="   <span>"+f.vocation+"</span>";c+="</div>";c+='<div class="resume-advisor-bg">'+f.brief+"</div>";if(f.status==1){c+='<a class="layui-btn layui-btn-primary" href="/advisor/detail/'+f.advisor_id+'" target="_blank"><i class="layui-icon" style="font-size:15px;">&#xe611;</i>申请服务</a>'}else{c+='<a class="layui-btn layui-btn-disabled" href="javascript:;"><i class="layui-icon" style="font-size:15px;">&#xe611;</i>暂停服务</a>'}c+="</li>"});$("#resume-advisor-panel .layui-timeline").html(c)}else{layer.msg("查询失败，请联系客服")}b.css("background","")}})});$("#sidemenu-right .sm-right-mobile").mouseenter(function(){menuMobileTips=layer.tips('<img src="'+context.res+'images/qr_jlb_wxmp.png" width="150" height="150" /><p style="margin-top:-23px;color:#666;font-size:12px;text-align:center;">微信扫码做简历</p>',$(this).find("i"),{tips:[4,"#fff"],tipsMore:true,time:0,success:function(b,a){b.css("left",(b.offset().left+25)+"px");b.find(".layui-layer-content").css("padding","0px")}})}).mouseleave(function(){layer.close(menuMobileTips)});$("#sidemenu-right .sm-right-gotop").click(function(){$("html,body").animate({scrollTop:"0px"},200)});$("#sidemenu-right .sm-right-kefu").click(function(){if("undefined"!=typeof(_MEIQIA)&&_MEIQIA.socketAlive){_MEIQIA("showPanel");$(".sm-right-kefu span").hide()}else{window.open("http://wpa.qq.com/msgrd?v=3&uin=442280685&site=qq&menu=yes")}});$("#sidemenu-right .sm-right-help").click(function(){window.open(context.host+"article/help/")});if(("editor"==context.page)&&-1!=$("#avater-img").attr("src").indexOf("avater_")){$("#avater-img").attr("src",context.thumb+"photo/cv_photo_default.jpg")}setInterval(function(){if(context.user){$.get(context.host+"common/heartbeat",{},function(a){a=$.parseJSON(a);if(0!=a.retCode){if($(".header-top-right .jlb-login-link").size()<1){$(".header-top-right div").html('<a href="javascript:void(0);" class="jlb-login-link">登录 / 注册</a>')}if($("#login-tips").size()<1){$("body").append($('<div id="login-tips" style="padding-top:30px;position:fixed;left:0px;bottom:0px;z-index:10000000;width:100%;height:60px;background:rgba(0,0,0,0.8);text-align:center;font-size:16px;color:#fffffe;"><i class="layui-icon" style="font-size:18px;font-weight:bold;color:#FFB800;">&#xe702;</i> 您已长时间未操作，系统已自动退出登录，请登录后继续制作简历<a href="javascript:void(0);" class="jlb-login-link" style="display: inline-block;width: 70px;height: 30px;line-height: 30px;margin-left: 10px;border-radius: 4px;color: #fff;background-color: #1E9FFF;">登录</a></div>'))}$("#login-tips .jlb-login-link").click();context.user=""}})}},1*10*1000);setTimeout(function(){if(!context.user){if($("#login-tips").size()<1){$('<div id="login-tips" style="display:none;padding-top:30px;position:fixed;left:0px;bottom:0px;z-index:10000000;width:100%;height:60px;background:rgba(0,0,0,0.8);text-align:center;font-size:16px;color:#fffffe;"><i class="layui-icon" style="font-size:18px;font-weight:bold;color:#FFB800;">&#xe702;</i> 当前处于未登录状态，简历不会被保存，请登录后开始制作简历<a href="javascript:void(0);" class="jlb-login-link" data-trace="editor-click-logindn" style="display: inline-block;width: 70px;height: 30px;line-height: 30px;margin-left: 10px;border-radius: 4px;color: #fff;background-color: #1E9FFF;">登录</a></div>').appendTo($("body")).slideDown(500)}}},4000);if(("#switch"==location.hash||"#import"==location.hash)&&context.user){var resumeHeight=$("#content").outerHeight();$.post(context.host+"resume/setheight",{resume_id:context.resume,resume_height:resumeHeight},function(a){a=$.parseJSON(a);if(-1==a.retCode){console.log("简历高度更新失败，height="+resumeHeight)}})}$("#cover img").on("contextmenu",function(){return false});$("#cover img").on("dragstart",function(){return false});$("#resume-cov").click(function(){var a=$.popup({title:'简历封面<font style="color:#bbb;font-size:12px;">&nbsp;&nbsp;&nbsp;添加或更换简历封面</font>',content:"",width:"350px",side:"left",id:"resume-cov-panel"});if(!a){return false}a.css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center center no-repeat");$.post(context.host+"resume/covlist",{},function(e){e=$.parseJSON(e).data;var b="";b+='<ul class="tpl-switch">';for(var c in e){var d="";d+='<li class="tpl-item" covid="'+e[c]["id"]+'" covimg="'+e[c]["image"]+'" covleft="'+e[c]["left"]+'" covtop="'+e[c]["top"]+'">';d+='<img src="'+context.thumb+"covimg/cov"+e[c]["image"]+'" width="136" height="192" />';d+='<div class="tpl-item-back">';d+='<button class="tpl-item-btn layui-btn layui-btn-normal">使用</button>';d+="</div>";d+="</li>";b+=d}b+="</ul>";a.find(".fish-popup-content").append(b);a.css("background","")});a.off("click").on("click","li",function(){if(!context.user){$("#header .jlb-login-link").click();return false}if("editor"==context.page){context.savedToServer(false);context.savedCovToServer=false;$("#operate-save").click();return false}var c=$(this).attr("covid");var b=$(this).attr("covimg");var e=$(this).attr("covleft");var f=$(this).attr("covtop");$("#cover .cover-info").css("left",e+"px");$("#cover .cover-info").css("top",f+"px");$("#cover .cover-info").css("position","absolute");var d=$("#cover .cover-info").prop("outerHTML");$.post(context.host+"resume/covsave",{resume_id:context.resume,cover_id:c,cover_info:d},function(h){var g=$.parseJSON(h);if(0==g.retCode){$("#cover .cover-img").attr("src",g.data.cover_img);$("#cover").attr("data-covid",g.data.cover_id);$("#cover").attr("data-show","show");setTimeout(function(){showAndHidePageLine()},200);$("html,body").animate({scrollTop:"0px"},500)}else{layer.msg(g.retText)}})})});context.savedCovToServer=true;$("#cover .cover-info").draggable({containment:"#cover",opacity:0.8,handle:".cover-info-move",stop:function(a,b){context.savedCovToServer=false}});$("#cover").on("click",".cover-info-add",function(){var a='<div class="baseinfo-row"><div class="baseinfo-label" contenteditable="true">输入标题：</div><div class="baseinfo-value" contenteditable="true">输入内容</div><div class="cover-info-del"><i class="jlbfont icon-remove" style="font-size:16px"></i></div></div>';$(this).parent().append(a);toolbar.edit($(this).parent().find(".baseinfo-label,.baseinfo-value").toArray());context.savedCovToServer=false});$("#cover").on("click",".cover-info-del",function(){$(this).parent().remove();context.savedCovToServer=false});$("#cover").on("keyup",".baseinfo-label,.baseinfo-value",function(){context.savedCovToServer=false});$("#cover").mouseleave(function(){if(!context.savedCovToServer){var a=$("#cover .cover-info").prop("outerHTML");$.post(context.host+"resume/covsave",{resume_id:context.resume,cover_id:$("#cover").data("covid"),cover_info:a},function(c){var b=$.parseJSON(c);if(0==b.retCode){$("#cover").attr("data-covid",b.data.cover_id);context.savedCovToServer=true}else{layer.msg(b.retText)}})}});$(function(){$('<button id="cov-switch-btn" class="layui-btn layui-btn-normal layui-btn-xs" style="position:absolute;top:10px;right:10px;display:none;">更换封面</button>').appendTo($("#cover"));$('<button id="cov-remove-btn" class="layui-btn layui-btn-normal layui-btn-xs layui-btn-danger" style="position:absolute;top:42px;right:10px;display:none;">删除封面</button>').appendTo($("#cover"));toolbar.edit($("#cover").find(".baseinfo-label,.baseinfo-value").toArray());if("#cover"==location.hash){$("#resume-cov").click()}});$("#cover").on("click","#cov-switch-btn",function(){$("#resume-cov").click()});$("#cover").on("click","#cov-remove-btn",function(){$.post(context.host+"resume/covsave",{resume_id:context.resume,cover_id:"",cover_info:""},function(b){var a=$.parseJSON(b);if(0==a.retCode){$("#cover").attr("data-show","hide");setTimeout(function(){showAndHidePageLine()},200)}else{layer.msg(a.retText)}})});!function(d){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=d()}else{if("function"==typeof define&&define.amd){define([],d)}else{var c;c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,c.ProgressBar=d()}}}(function(){var d;return function c(b,l,k){function j(n,m){if(!l[n]){if(!b[n]){var f="function"==typeof require&&require;if(!m&&f){return f(n,!0)}if(i){return i(n,!0)}var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}var a=l[n]={exports:{}};b[n][0].call(a.exports,function(g){var o=b[n][1][g];return j(o?o:g)},a,a.exports,c,b,l,k)}return l[n].exports}for(var i="function"==typeof require&&require,h=0;h<k.length;h++){j(k[h])}return j}({1:[function(a,f,e){(function(){var g=this||Function("return this")(),h=function(){function S(){}function R(j,i){var k;for(k in j){Object.hasOwnProperty.call(j,k)&&i(k)}}function Q(j,i){return R(i,function(k){j[k]=i[k]}),j}function P(j,i){R(i,function(k){"undefined"==typeof j[k]&&(j[k]=i[k])})}function O(v,u,t,s,r,q,p){var o,n,m,j=q>v?0:(v-q)/r;for(o in u){u.hasOwnProperty(o)&&(n=p[o],m="function"==typeof n?n:I[n],u[o]=N(t[o],s[o],m,j))}return u}function N(j,i,l,k){return j+(i-j)*l(k)}function M(j,i){var l=J.prototype.filter,k=j._filterArgs;R(l,function(m){"undefined"!=typeof l[m][i]&&l[m][i].apply(j,k)})}function L(v,u,t,s,r,q,p,o,n,k,i){B=u+t+s,A=Math.min(i||C(),B),z=A>=B,b=s-(B-A),v.isPlaying()&&(z?(n(p,v._attachment,b),v.stop(!0)):(v._scheduleId=k(v._timeoutHandler,E),M(v,"beforeTween"),u+t>A?O(1,r,q,p,1,1,o):O(A,r,q,p,s,u+t,o),M(v,"afterTween"),n(r,v._attachment,b)))}function K(j,i){var l={},k=typeof i;return"string"===k||"function"===k?R(j,function(m){l[m]=i}):R(j,function(m){l[m]||(l[m]=i[m]||G)}),l}function J(j,i){this._currentState=j||{},this._configured=!1,this._scheduleFunction=H,"undefined"!=typeof i&&this.setConfig(i)}var I,H,G="linear",F=500,E=1000/60,D=Date.now?Date.now:function(){return +new Date},C="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:D;H="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var B,A,z,b;return J.prototype.tween=function(i){return this._isTweening?this:(void 0===i&&this._configured||this.setConfig(i),this._timestamp=C(),this._start(this.get(),this._attachment),this.resume())},J.prototype.setConfig=function(j){j=j||{},this._configured=!0,this._attachment=j.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=j.delay||0,this._start=j.start||S,this._step=j.step||S,this._finish=j.finish||S,this._duration=j.duration||F,this._currentState=Q({},j.from)||this.get(),this._originalState=this.get(),this._targetState=Q({},j.to)||this.get();var i=this;this._timeoutHandler=function(){L(i,i._timestamp,i._delay,i._duration,i._currentState,i._originalState,i._targetState,i._easing,i._step,i._scheduleFunction)};var l=this._currentState,k=this._targetState;return P(k,l),this._easing=K(l,j.easing||G),this._filterArgs=[l,this._originalState,k,this._easing],M(this,"tweenCreated"),this},J.prototype.get=function(){return Q({},this._currentState)},J.prototype.set=function(i){this._currentState=i},J.prototype.pause=function(){return this._pausedAtTime=C(),this._isPaused=!0,this},J.prototype.resume=function(){return this._isPaused&&(this._timestamp+=C()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},J.prototype.seek=function(j){j=Math.max(j,0);var i=C();return this._timestamp+j===0?this:(this._timestamp=i-j,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,L(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,i),this.pause()),this)},J.prototype.stop=function(i){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=S,(g.cancelAnimationFrame||g.webkitCancelAnimationFrame||g.oCancelAnimationFrame||g.msCancelAnimationFrame||g.mozCancelRequestAnimationFrame||g.clearTimeout)(this._scheduleId),i&&(M(this,"beforeTween"),O(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),M(this,"afterTween"),M(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},J.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},J.prototype.setScheduleFunction=function(i){this._scheduleFunction=i},J.prototype.dispose=function(){var i;for(i in this){this.hasOwnProperty(i)&&delete this[i]}},J.prototype.filter={},J.prototype.formula={linear:function(i){return i}},I=J.prototype.formula,Q(J,{now:C,each:R,tweenProps:O,tweenProp:N,applyFilter:M,shallowCopy:Q,defaults:P,composeEasingObject:K}),"function"==typeof SHIFTY_DEBUG_NOW&&(g.timeoutHandler=L),"object"==typeof e?f.exports=J:"function"==typeof d&&d.amd?d(function(){return J}):"undefined"==typeof g.Tweenable&&(g.Tweenable=J),J}();!function(){h.shallowCopy(h.prototype.formula,{easeInQuad:function(b){return Math.pow(b,2)},easeOutQuad:function(b){return -(Math.pow(b-1,2)-1)},easeInOutQuad:function(b){return(b/=0.5)<1?0.5*Math.pow(b,2):-0.5*((b-=2)*b-2)},easeInCubic:function(b){return Math.pow(b,3)},easeOutCubic:function(b){return Math.pow(b-1,3)+1},easeInOutCubic:function(b){return(b/=0.5)<1?0.5*Math.pow(b,3):0.5*(Math.pow(b-2,3)+2)},easeInQuart:function(b){return Math.pow(b,4)},easeOutQuart:function(b){return -(Math.pow(b-1,4)-1)},easeInOutQuart:function(b){return(b/=0.5)<1?0.5*Math.pow(b,4):-0.5*((b-=2)*Math.pow(b,3)-2)},easeInQuint:function(b){return Math.pow(b,5)},easeOutQuint:function(b){return Math.pow(b-1,5)+1},easeInOutQuint:function(b){return(b/=0.5)<1?0.5*Math.pow(b,5):0.5*(Math.pow(b-2,5)+2)},easeInSine:function(b){return -Math.cos(b*(Math.PI/2))+1},easeOutSine:function(b){return Math.sin(b*(Math.PI/2))},easeInOutSine:function(b){return -0.5*(Math.cos(Math.PI*b)-1)},easeInExpo:function(b){return 0===b?0:Math.pow(2,10*(b-1))},easeOutExpo:function(b){return 1===b?1:-Math.pow(2,-10*b)+1},easeInOutExpo:function(b){return 0===b?0:1===b?1:(b/=0.5)<1?0.5*Math.pow(2,10*(b-1)):0.5*(-Math.pow(2,-10*--b)+2)},easeInCirc:function(b){return -(Math.sqrt(1-b*b)-1)},easeOutCirc:function(b){return Math.sqrt(1-Math.pow(b-1,2))},easeInOutCirc:function(b){return(b/=0.5)<1?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)},easeOutBounce:function(b){return 1/2.75>b?7.5625*b*b:2/2.75>b?7.5625*(b-=1.5/2.75)*b+0.75:2.5/2.75>b?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375},easeInBack:function(j){var i=1.70158;return j*j*((i+1)*j-i)},easeOutBack:function(j){var i=1.70158;return(j-=1)*j*((i+1)*j+i)+1},easeInOutBack:function(j){var i=1.70158;return(j/=0.5)<1?0.5*(j*j*(((i*=1.525)+1)*j-i)):0.5*((j-=2)*j*(((i*=1.525)+1)*j+i)+2)},elastic:function(b){return -1*Math.pow(4,-8*b)*Math.sin((6*b-1)*(2*Math.PI)/2)+1},swingFromTo:function(j){var i=1.70158;return(j/=0.5)<1?0.5*(j*j*(((i*=1.525)+1)*j-i)):0.5*((j-=2)*j*(((i*=1.525)+1)*j+i)+2)},swingFrom:function(j){var i=1.70158;return j*j*((i+1)*j-i)},swingTo:function(j){var i=1.70158;return(j-=1)*j*((i+1)*j+i)+1},bounce:function(b){return 1/2.75>b?7.5625*b*b:2/2.75>b?7.5625*(b-=1.5/2.75)*b+0.75:2.5/2.75>b?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375},bouncePast:function(b){return 1/2.75>b?7.5625*b*b:2/2.75>b?2-(7.5625*(b-=1.5/2.75)*b+0.75):2.5/2.75>b?2-(7.5625*(b-=2.25/2.75)*b+0.9375):2-(7.5625*(b-=2.625/2.75)*b+0.984375)},easeFromTo:function(b){return(b/=0.5)<1?0.5*Math.pow(b,4):-0.5*((b-=2)*Math.pow(b,3)-2)},easeFrom:function(b){return Math.pow(b,4)},easeTo:function(b){return Math.pow(b,0.25)}})}(),function(){function j(L,K,J,I,H,G){function F(b){return((y*b+x)*b+w)*b}function E(b){return((v*b+u)*b+t)*b}function D(b){return(3*y*b+2*x)*b+w}function C(b){return 1/(200*b)}function B(l,k){return E(z(l,k))}function A(b){return b>=0?b:0-b}function z(l,k){var r,q,p,o,n,m;for(p=l,m=0;8>m;m++){if(o=F(p)-l,A(o)<k){return p}if(n=D(p),A(n)<0.000001){break}p-=o/n}if(r=0,q=1,p=l,r>p){return r}if(p>q){return q}for(;q>r;){if(o=F(p),A(o-l)<k){return p}l>o?r=p:q=p,p=0.5*(q-r)+r}return p}var y=0,x=0,w=0,v=0,u=0,t=0;return w=3*K,x=3*(I-K)-w,y=1-w-x,t=3*J,u=3*(H-J)-t,v=1-t-u,B(L,C(G))}function i(k,n,m,l){return function(b){return j(b,k,n,m,l,1)}}h.setBezierFunction=function(b,o,n,m,l){var k=i(o,n,m,l);return k.displayName=b,k.x1=o,k.y1=n,k.x2=m,k.y2=l,h.prototype.formula[b]=k},h.unsetBezierFunction=function(b){delete h.prototype.formula[b]}}(),function(){function j(l,k,p,o,n,m){return h.tweenProps(o,k,l,p,1,m,n)}var i=new h;i._filterArgs=[],h.interpolate=function(v,u,t,s,r){var q=h.shallowCopy({},v),p=r||0,o=h.composeEasingObject(v,s||"linear");i.set({});var n=i._filterArgs;n.length=0,n[0]=q,n[1]=v,n[2]=u,n[3]=o,h.applyFilter(i,"tweenCreated"),h.applyFilter(i,"beforeTween");var b=j(v,q,u,t,o,p);return h.applyFilter(i,"afterTween"),b}}(),function(af){function ae(j,i){var m,l=[],k=j.length;for(m=0;k>m;m++){l.push("_"+i+"_"+m)}return l}function ad(j){var i=j.match(H);return i?(1===i.length||j[0].match(I))&&i.unshift(""):i=["",""],i.join(P)}function ac(i){af.each(i,function(b){var j=i[b];"string"==typeof j&&j.match(D)&&(i[b]=ab(j))})}function ab(b){return X(D,b,aa)}function aa(j){var i=Z(j);return"rgb("+i[0]+","+i[1]+","+i[2]+")"}function Z(b){return b=b.replace(/#/,""),3===b.length&&(b=b.split(""),b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),N[0]=Y(b.substr(0,2)),N[1]=Y(b.substr(2,2)),N[2]=Y(b.substr(4,2)),N}function Y(b){return parseInt(b,16)}function X(j,i,p){var o=i.match(j),n=i.replace(j,P);if(o){for(var m,l=o.length,k=0;l>k;k++){m=o.shift(),n=n.replace(P,p(m))}}return n}function W(b){return X(F,b,V)}function V(j){for(var i=j.match(G),m=i.length,l=j.match(E)[0],k=0;m>k;k++){l+=parseInt(i[k],10)+","}return l=l.slice(0,-1)+")"}function U(i){var b={};return af.each(i,function(j){var l=i[j];if("string"==typeof l){var k=M(l);b[j]={formatString:ad(l),chunkNames:ae(k,j)}}}),b}function T(i,j){af.each(j,function(b){for(var n=i[b],m=M(n),l=m.length,k=0;l>k;k++){i[j[b].chunkNames[k]]=+m[k]}delete i[b]})}function S(i,j){af.each(j,function(b){var m=i[b],l=R(i,j[b].chunkNames),k=Q(l,j[b].chunkNames);m=O(j[b].formatString,k),i[b]=W(m)})}function R(j,i){for(var n,m={},l=i.length,k=0;l>k;k++){n=i[k],m[n]=j[n],delete j[n]}return m}function Q(j,i){L.length=0;for(var l=i.length,k=0;l>k;k++){L.push(j[i[k]])}return L}function O(j,i){for(var m=j,l=i.length,k=0;l>k;k++){m=m.replace(P,+i[k].toFixed(4))}return m}function M(b){return b.match(G)}function K(i,j){af.each(j,function(b){var q,p=j[b],o=p.chunkNames,n=o.length,m=i[b];if("string"==typeof m){var l=m.split(" "),k=l[l.length-1];for(q=0;n>q;q++){i[o[q]]=l[q]||k}}else{for(q=0;n>q;q++){i[o[q]]=m}}delete i[b]})}function J(i,j){af.each(j,function(b){var q=j[b],p=q.chunkNames,o=p.length,n=i[p[0]],m=typeof n;if("string"===m){for(var l="",k=0;o>k;k++){l+=" "+i[p[k]],delete i[p[k]]}i[b]=l.substr(1)}else{i[b]=n}})}var I=/(\d|\-|\.)/,H=/([^\-0-9\.]+)/g,G=/[0-9.\-]+/g,F=new RegExp("rgb\\("+G.source+/,\s*/.source+G.source+/,\s*/.source+G.source+"\\)","g"),E=/^.*\(/,D=/#([0-9]|[a-f]){3,6}/gi,P="VAL",N=[],L=[];af.prototype.filter.token={tweenCreated:function(j,i,l,k){ac(j),ac(i),ac(l),this._tokenData=U(j)},beforeTween:function(j,i,l,k){K(k,this._tokenData),T(j,this._tokenData),T(i,this._tokenData),T(l,this._tokenData)},afterTween:function(j,i,l,k){S(j,this._tokenData),S(i,this._tokenData),S(l,this._tokenData),J(k,this._tokenData)}}}(h)}).call(null)},{}],2:[function(h,g,l){var k=h("./shape"),j=h("./utils"),i=function(f,e){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,k.apply(this,arguments)};i.prototype=new k,i.prototype.constructor=i,i.prototype._pathString=function(f){var e=f.strokeWidth;f.trailWidth&&f.trailWidth>f.strokeWidth&&(e=f.trailWidth);var m=50-e/2;return j.render(this._pathTemplate,{radius:m,"2radius":2*m})},i.prototype._trailString=function(b){return this._pathString(b)},g.exports=i},{"./shape":7,"./utils":8}],3:[function(h,g,l){var k=h("./shape"),j=h("./utils"),i=function(f,e){this._pathTemplate="M 0,{center} L 100,{center}",k.apply(this,arguments)};i.prototype=new k,i.prototype.constructor=i,i.prototype._initializeSvg=function(f,e){f.setAttribute("viewBox","0 0 100 "+e.strokeWidth),f.setAttribute("preserveAspectRatio","none")},i.prototype._pathString=function(b){return j.render(this._pathTemplate,{center:b.strokeWidth/2})},i.prototype._trailString=function(b){return this._pathString(b)},g.exports=i},{"./shape":7,"./utils":8}],4:[function(f,e,g){e.exports={Line:f("./line"),Circle:f("./circle"),SemiCircle:f("./semicircle"),Path:f("./path"),Shape:f("./shape"),utils:f("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./utils":8}],5:[function(j,i,p){var o=j("shifty"),n=j("./utils"),m={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},l=function k(f,e){if(!(this instanceof k)){throw new Error("Constructor was called without new keyword")}e=n.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},e);var h;h=n.isString(f)?document.querySelector(f):f,this.path=h,this._opts=e,this._tweenable=null;var g=this.path.getTotalLength();this.path.style.strokeDasharray=g+" "+g,this.set(0)};l.prototype.value=function(){var f=this._getComputedDashOffset(),e=this.path.getTotalLength(),g=1-f/e;return parseFloat(g.toFixed(6),10)},l.prototype.set=function(g){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(g);var e=this._opts.step;if(n.isFunction(e)){var r=this._easing(this._opts.easing),q=this._calculateTo(g,r),h=this._opts.shape||this;e(q,h,this._opts.attachment)}},l.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},l.prototype.animate=function(y,x,w){x=x||{},n.isFunction(x)&&(w=x,x={});var v=n.extend({},x),u=n.extend({},this._opts);x=n.extend(u,x);var t=this._easing(x.easing),s=this._resolveFromAndTo(y,t,v);this.stop(),this.path.getBoundingClientRect();var r=this._getComputedDashOffset(),q=this._progressToOffset(y),e=this;this._tweenable=new o,this._tweenable.tween({from:n.extend({offset:r},s.from),to:n.extend({offset:q},s.to),duration:x.duration,easing:t,step:function(b){e.path.style.strokeDashoffset=b.offset;var f=x.shape||e;x.step(b,f,x.attachment)},finish:function(b){n.isFunction(w)&&w()}})},l.prototype._getComputedDashOffset=function(){var b=window.getComputedStyle(this.path,null);return parseFloat(b.getPropertyValue("stroke-dashoffset"),10)},l.prototype._progressToOffset=function(f){var e=this.path.getTotalLength();return e-f*e},l.prototype._resolveFromAndTo=function(f,e,g){return g.from&&g.to?{from:g.from,to:g.to}:{from:this._calculateFrom(e),to:this._calculateTo(f,e)}},l.prototype._calculateFrom=function(b){return o.interpolate(this._opts.from,this._opts.to,this.value(),b)},l.prototype._calculateTo=function(f,e){return o.interpolate(this._opts.from,this._opts.to,f,e)},l.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},l.prototype._easing=function(b){return m.hasOwnProperty(b)?m[b]:b},i.exports=l},{"./utils":8,shifty:1}],6:[function(i,h,n){var m=i("./shape"),l=i("./circle"),k=i("./utils"),j=function(f,e){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,m.apply(this,arguments)};j.prototype=new m,j.prototype.constructor=j,j.prototype._initializeSvg=function(f,e){f.setAttribute("viewBox","0 0 100 50")},j.prototype._initializeTextContainer=function(f,e,g){f.text.style&&(g.style.top="auto",g.style.bottom="0",f.text.alignToBottom?k.setStyle(g,"transform","translate(-50%, 0)"):k.setStyle(g,"transform","translate(-50%, 50%)"))},j.prototype._pathString=l.prototype._pathString,j.prototype._trailString=l.prototype._trailString,h.exports=j},{"./circle":2,"./shape":7,"./utils":8}],7:[function(j,i,p){var o=j("./path"),n=j("./utils"),m="Object is destroyed",l=function k(h,e){if(!(this instanceof k)){throw new Error("Constructor was called without new keyword")}if(0!==arguments.length){this._opts=n.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},e,!0),n.isObject(e)&&void 0!==e.svgStyle&&(this._opts.svgStyle=e.svgStyle),n.isObject(e)&&n.isObject(e.text)&&void 0!==e.text.style&&(this._opts.text.style=e.text.style);var s,r=this._createSvgView(this._opts);if(s=n.isString(h)?document.querySelector(h):h,!s){throw new Error("Container does not exist: "+h)}this._container=s,this._container.appendChild(r.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&n.setStyles(r.svg,this._opts.svgStyle),this.svg=r.svg,this.path=r.path,this.trail=r.trail,this.text=null;var q=n.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new o(r.path,q),n.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};l.prototype.animate=function(f,e,g){if(null===this._progressPath){throw new Error(m)}this._progressPath.animate(f,e,g)},l.prototype.stop=function(){if(null===this._progressPath){throw new Error(m)}void 0!==this._progressPath&&this._progressPath.stop()},l.prototype.destroy=function(){if(null===this._progressPath){throw new Error(m)}this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},l.prototype.set=function(b){if(null===this._progressPath){throw new Error(m)}this._progressPath.set(b)},l.prototype.value=function(){if(null===this._progressPath){throw new Error(m)}return void 0===this._progressPath?0:this._progressPath.value()},l.prototype.setText=function(b){if(null===this._progressPath){throw new Error(m)}null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),n.isObject(b)?(n.removeChildren(this.text),this.text.appendChild(b)):this.text.innerHTML=b},l.prototype._createSvgView=function(f){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(e,f);var h=null;(f.trailColor||f.trailWidth)&&(h=this._createTrail(f),e.appendChild(h));var g=this._createPath(f);return e.appendChild(g),{svg:e,path:g,trail:h}},l.prototype._initializeSvg=function(f,e){f.setAttribute("viewBox","0 0 100 100")},l.prototype._createPath=function(f){var e=this._pathString(f);return this._createPathElement(e,f)},l.prototype._createTrail=function(f){var e=this._trailString(f),g=n.extend({},f);return g.trailColor||(g.trailColor="#eee"),g.trailWidth||(g.trailWidth=g.strokeWidth),g.color=g.trailColor,g.strokeWidth=g.trailWidth,g.fill=null,this._createPathElement(e,g)},l.prototype._createPathElement=function(f,e){var g=document.createElementNS("http://www.w3.org/2000/svg","path");return g.setAttribute("d",f),g.setAttribute("stroke",e.color),g.setAttribute("stroke-width",e.strokeWidth),e.fill?g.setAttribute("fill",e.fill):g.setAttribute("fill-opacity","0"),g},l.prototype._createTextContainer=function(f,e){var h=document.createElement("div");h.className=f.text.className;var g=f.text.style;return g&&(f.text.autoStyleContainer&&(e.style.position="relative"),n.setStyles(h,g),g.color||(h.style.color=f.color)),this._initializeTextContainer(f,e,h),h},l.prototype._initializeTextContainer=function(f,e,g){},l.prototype._pathString=function(b){throw new Error("Override this function for each progress bar")},l.prototype._trailString=function(b){throw new Error("Override this function for each progress bar")},l.prototype._warnContainerAspectRatio=function(f){if(this.containerAspectRatio){var e=window.getComputedStyle(f,null),h=parseFloat(e.getPropertyValue("width"),10),g=parseFloat(e.getPropertyValue("height"),10);n.floatEquals(this.containerAspectRatio,h/g)||(console.warn("Incorrect aspect ratio of container","#"+f.id,"detected:",e.getPropertyValue("width")+"(width)","/",e.getPropertyValue("height")+"(height)","=",h/g),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},i.exports=l},{"./path":5,"./utils":8}],8:[function(H,G,F){function E(i,h,m){i=i||{},h=h||{},m=m||!1;for(var l in h){if(h.hasOwnProperty(l)){var k=i[l],j=h[l];m&&w(k)&&w(j)?i[l]=E(k,j,m):i[l]=j}}return i}function D(i,h){var n=i;for(var m in h){if(h.hasOwnProperty(m)){var l=h[m],k="\\{"+m+"\\}",j=new RegExp(k,"g");n=n.replace(j,l)}}return n}function C(h,g,l){for(var k=h.style,j=0;j<s.length;++j){var i=s[j];k[i+A(g)]=l}k[g]=l}function B(f,e){v(e,function(a,g){null!==a&&void 0!==a&&(w(a)&&a.prefix===!0?C(f,g,a.value):f.style[g]=a)})}function A(b){return b.charAt(0).toUpperCase()+b.slice(1)}function z(b){return"string"==typeof b||b instanceof String}function y(b){return"function"==typeof b}function x(b){return"[object Array]"===Object.prototype.toString.call(b)}function w(f){if(x(f)){return !1}var e=typeof f;return"object"===e&&!!f}function v(f,e){for(var h in f){if(f.hasOwnProperty(h)){var g=f[h];e(g,h)}}}function u(f,e){return Math.abs(f-e)<r}function t(b){for(;b.firstChild;){b.removeChild(b.firstChild)}}var s="Webkit Moz O ms".split(" "),r=0.001;G.exports={extend:E,render:D,setStyle:C,setStyles:B,capitalize:A,isString:z,isFunction:y,isObject:w,forEachObject:v,floatEquals:u,removeChildren:t}},{}]},{},[4])(4)});var getDiagnose=function(){var k=Math.ceil($("#content").height()/1345);var f={};var t=$('tbody:not("#baseinfo")');var q=function(A){A=A.replace(/<br>/g,"{br}").replace(/<br\/>/g,"{br}").replace(/<\/div>/g,"{br}").replace(/<div>/g,"{br}").replace(/<\/p>/g,"{br}").replace(/<p>/g,"{br}").replace(/<\/li>/g,"{br}").replace(/<li>/g,"{br}").replace(/\{br\}\{br\}/g,"{br}");var x=A.split("{br}");var z=0;for(var y=0;y<x.length;y++){if(x[y]&&x[y].trim()){z++}}return z};var r=function(){var x={};if(k>1){x.score=-2;x.message='<font color="#333">「简历篇幅」</font>简历篇幅建议控制在1页以内，最多不要超过2页，90%HR都表示不喜欢看太长的简历，可点击“自动缩成1页”或在“样式设置”中调整字号、行距'}else{if(k<0.75&&k>=0.65){x.score=-10;x.message='<font color="#333">「简历篇幅」</font>简历内容不够丰富，简历适当增加内容或调大字号与行距'}else{if(k<0.65){x.score=-20;x.message='<font color="#333">「简历篇幅」</font>简历内容比较匮乏，请参考<a href="javascript:$(\'.sm-right-fanwen\').click();">简历贴士</a>认真填写简历内容'}else{return null}}}return x};var s=function(){var x={item:{score:0,message:""}};var A=$('#baseinfo span[key="name"]').text();var z=$('#baseinfo span[key="mobile"]').text();var y=$('#baseinfo span[key="email"]').text();var B=$('#baseinfo span[key="years"]').text();var C=$('#baseinfo span[key="job"]').text();if(!A||-1!=A.indexOf("简历本")||-1!=A.indexOf("简小")){x.name={};x.name.score=-6;x.name.message='<font color="#333">「基本信息」</font>请正确填写你的姓名，不然HR都不知道你是谁'}if("13366668888"==z){x.mobile={};x.mobile.score=-6;x.mobile.message='<font color="#333">「基本信息」</font>请正确填写手机号码，以便HR随时联系你面试'}if(!y||-1!=y.indexOf("jianliben")){x.email={};x.email.score=-3;x.email.message='<font color="#333">「基本信息」</font>建议正确填写邮箱，面试邀请和offer大多通过邮件发送'}if(!C||-1!=C.indexOf("应聘岗位")){x.job={};x.job.score=-1;x.job.message='<font color="#333">「基本信息」</font>求职简历建议填写明确的应聘岗位，方便HR进行精准匹配'}if(C&&(-1!=C.indexOf("、")||-1!=C.indexOf("，")||-1!=C.indexOf("/")||-1!=C.indexOf("|")||-1!=C.indexOf("&"))){x.job={};x.job.score=-1;x.job.message='<font color="#333">「基本信息」</font>多个应聘岗位建议复制多份简历，针对每个岗位编写简历'}return x};var w=null;var e=null;var l=null;var n=null;var g=null;var i=null;var d=null;var u=null;var o=null;var m=null;t.each(function(y){var x=t.eq(y).find(".field-title-wrap").find(".editable").text();if(-1!=x.indexOf("意向")){w=t.eq(y).find(".field-value-td");w.title=x}if(-1!=x.indexOf("教育")){e=t.eq(y).find(".field-value-td");e.title=x}if(-1!=x.indexOf("评价")||-1!=x.indexOf("个人介绍")||-1!=x.indexOf("自我介绍")||-1!=x.indexOf("个人简介")||-1!=x.indexOf("自我简介")){l=t.eq(y).find(".field-value-td");l.title=x}if(-1!=x.indexOf("工作")){n=t.eq(y).find(".field-value-td");n.title=x}if(-1!=x.indexOf("实践经历")||-1!=x.indexOf("个人实践")||-1!=x.indexOf("校外实践")||-1!=x.indexOf("社会实践")){g=t.eq(y).find(".field-value-td");g.title=x}if(-1!=x.indexOf("技能")||-1!=x.indexOf("能力")){i=t.eq(y).find(".field-value-td");i.title=x}if(-1!=x.indexOf("项目")){d=t.eq(y).find(".field-value-td");d.title=x}if(-1!=x.indexOf("获奖")||-1!=x.indexOf("荣誉")||-1!=x.indexOf("奖项")||-1!=x.indexOf("奖励")){u=t.eq(y).find(".field-value-td");u.title=x}if(-1!=x.indexOf("兴趣")||-1!=x.indexOf("爱好")){o=t.eq(y).find(".field-value-td");o.title=x}if(-1!=x.indexOf("校内实践")||-1!=x.indexOf("校内经历")||-1!=x.indexOf("学校实践")||-1!=x.indexOf("学校经历")||-1!=x.indexOf("在校实践")||-1!=x.indexOf("在校经历")){m=t.eq(y).find(".field-value-td");m.title=x}});var p=function(){var x={item:{score:0,message:""}};if(!e){x.item1={};x.item1.score=-1;x.item1.message='<font color="#333">「教育背景」</font>建议添加教育背景模块，描述自己的教育或培训经历'}else{if(-1!=e.text().indexOf("XX")){x.item1={};x.item1.score=-1;x.item1.message='<font color="#333">「'+e.title+"」</font>请认真填写"+e.title+"，985或211学校可重点标注，应届生建议填写所学课程、GPA及成绩排名描述信息"}else{var y=e.find(".field-value-span");y.each(function(z){if(-1!=y.eq(z).text().indexOf("本科")){x.item2={};x.item2.score=2}if(-1!=y.eq(z).text().indexOf("硕士")||-1!=y.eq(z).text().indexOf("研究生")){x.item3={};x.item3.score=3}if(-1!=y.eq(z).text().indexOf("博士")){x.item4={};x.item4.score=5}if(-1!=y.eq(z).text().indexOf("专科")||-1!=y.eq(z).text().indexOf("大专")){x.item5={};x.item5.score=1}})}}return x};var j=function(){var x={item:{score:0,message:""}};if(l&&!i){var A=l.find(".field-value-span").text();if(!A.trim()||-1!=A.indexOf("个人技能、知识描述")||-1!=A.indexOf("个人能力、特长描述")||-1!=A.indexOf("个人性格、特质描述")){x.item1={};x.item1.score=-8;x.item1.message='<font color="#333">「'+l.title+"」</font>"+l.title+"是加分项，请参考<a href=\"javascript:$('.sm-right-fanwen').click();\">简历贴士</a></a>认真填写"}else{var y=q(l.find(".field-value-span").find(".editable").html());if(y<2&&l.find(".field-value-span").find(".editable").text().length<20){x.item1={};x.item1.score=-3;x.item1.message='<font color="#333">「'+l.title+"」</font>"+l.title+"内容不够丰富，可参考<a href=\"javascript:$('.sm-right-fanwen').click();\">简历贴士</a>进行修改"}else{x.item1={};x.item1.score=5}}}else{if(!l&&i){var z=i.find(".field-value-span").text();if(!z.trim()||-1!=z.indexOf("XX")){x.item1={};x.item1.score=-8;x.item1.message='<font color="#333">「'+i.title+"」</font>"+i.title+"没有填写完整，请参考<a href=\"javascript:$('.sm-right-fanwen').click();\">简历贴士</a>认真填写"}else{var y=i.find(".field-value-span").size();if(y<2){x.item1={};x.item1.score=-3;x.item1.message='<font color="#333">「'+i.title+"」</font>"+i.title+"内容不够丰富，可参考<a href=\"javascript:$('.sm-right-fanwen').click();\">简历贴士</a>进行修改"}else{x.item1={};x.item1.score=5}}}else{if(l&&i){var A=l.find(".field-value-span").text();if(!A.trim()||-1!=A.indexOf("个人技能、知识描述")||-1!=A.indexOf("个人能力、特长描述")||-1!=A.indexOf("个人性格、特质描述")){x.item1={};x.item1.score=-8;x.item1.message='<font color="#333">「'+l.title+"」</font>"+l.title+"没有填写完整，请参考<a href=\"javascript:$('.sm-right-fanwen').click();\">简历贴士</a>认真填写"}else{x.item1={};x.item1.score=5}var z=i.find(".field-value-span").text();if(!z.trim()||-1!=z.indexOf("XX")){x.item2={};x.item2.score=-8;x.item2.message='<font color="#333">「'+i.title+"」</font>"+i.title+"没有填写完整，请参考<a href=\"javascript:$('.sm-right-fanwen').click();\">简历贴士</a>认真填写"}else{x.item2={};x.item2.score=5}}else{x.item1={};x.item1.score=-8;x.item1.message='<font color="#333">「自我评价」</font>未添加自我评价模块，建议添加该模块，参考<a href="javascript:$(\'.sm-right-fanwen\').click();">简历贴士</a>认真填写'}}}return x};var h=function(){var x={item:{score:0,message:""}};if(w&&w.find(".field-value-span").text().trim()){x.item1={score:0,message:""};var y=w.find(".field-value-span").text();if(-1!=y.indexOf("应聘岗位")||-1!=y.indexOf("期望薪资")||-1!=y.indexOf("意向城市")||-1!=y.indexOf("到岗时间")){x.item1={};x.item1.score=-3;x.item1.message='<font color="#333">「'+w.title+"」</font>"+w.title+"建议填写完整，减少求职期望与招聘要求不匹配的情况"}else{x.item1.score=3}}return x};var v=function(){var x={item:{score:0,message:""}};if(u&&u.find(".field-value-span").text().trim()){x.item1={score:0,message:""};var z=u.find(".field-value-span").find(".editable").html();var y=q(z);if(-1==z.indexOf("XX")&&y<=2){x.item1.score=2}if(-1==z.indexOf("XX")&&y>2&&y<5){x.item1.score=3}if(-1==z.indexOf("XX")&&y>=5){x.item1.score=4}if(-1!=z.indexOf("XX")){x.item1={};x.item1.score=-3;x.item1.message='<font color="#333">「'+u.title+"」</font>"+u.title+"是加分项，建议按时间倒叙填写，没有可删除该模块"}}return x};var c=function(){var x={item:{score:0,message:""}};if(o&&o.find(".field-value-span").text().trim()){x.item1={score:0,message:""};var z=o.find(".field-value-span").find(".editable").html();var y=q(z);if(-1==z.indexOf("XX")&&y<=2){x.item1.score=2}if(-1==z.indexOf("XX")&&y>2&&y<5){x.item1.score=3}if(-1==z.indexOf("XX")&&y>=5){x.item1.score=4}if(-1!=z.indexOf("XX")){x.item1={};x.item1.score=-3;x.item1.message='<font color="#333">「'+o.title+"」</font>"+o.title+"不是必填项，但可能吸引HR的关注，若填写篇幅不宜过长"}}return x};var b=function(){var x={item:{score:0,message:""}};if(d&&d.find(".field-value-span").text().trim()){x.item1={score:0,message:""};var y=d.find(".field-value-span").text();if(-1!=y.indexOf("XX")||-1!=y.indexOf("这里可对项目做简单的介绍")||-1!=y.indexOf("运用了哪些工具和方法")){x.item1={};x.item1.score=-3;x.item1.message='<font color="#333">「'+d.title+"」</font>"+d.title+"没有填写完整，请按照实际情况填写，或删除该模块"}else{x.item1.score=3}}return x};var a=function(){var x={item:{score:0,message:""}};if(n&&-1!=n.text().indexOf("XX")){x.item1={};x.item1.score=-10;x.item1.message='<font color="#333">「'+n.title+"」</font>"+n.title+"没有填写完整，请按照实际情况填写，或删除该模块"}if(g&&-1!=g.text().indexOf("XX")){x.item2={};x.item2.score=-10;x.item2.message='<font color="#333">「'+g.title+"」</font>"+g.title+"没有填写完整，请按照实际情况填写，或删除该模块"}if(m&&-1!=m.text().indexOf("XX")){x.item2={};x.item2.score=-10;x.item2.message='<font color="#333">「'+m.title+"」</font>"+m.title+"没有填写完整，请按照实际情况填写，或删除该模块"}return x};f.diagnose=function(){var E={};var M=[];var B=[];var x=5;var O=r();console.log("pageinfo:");console.log(O);if(O){x=x+O.score;if(O.score<0){B.push(O.message)}}M.push(x);var S=30;var Q=s();console.log("baseinfo:");console.log(Q);for(var L in Q){S=S+Q[L].score;if(Q[L].score<0){B.push(Q[L].message)}}M.push(S);var C=0;var z=p();console.log("education:");console.log(z);for(var L in z){C=C+z[L].score;if(z[L].score<0){B.push(z[L].message)}}M.push(C);var I=20;var F=j();console.log("evaluation:");console.log(F);for(var L in F){I=I+F[L].score;if(F[L].score<0){B.push(F[L].message)}}M.push(I);var P=30;var K=a();console.log("experience:");console.log(K);for(var L in K){P=P+K[L].score;if(K[L].score<0){B.push(K[L].message)}}M.push(P);var G=0;var R=h();console.log("intention:");console.log(R);for(var L in R){G=G+R[L].score;if(R[L].score<0){B.push(R[L].message)}}M.push(G);var A=0;var N=v();console.log("honor:");console.log(N);for(var L in N){A=A+N[L].score;if(N[L].score<0){B.push(N[L].message)}}M.push(A);var D=0;var J=c();console.log("hobby:");console.log(J);for(var L in J){D=D+J[L].score;if(J[L].score<0){B.push(J[L].message)}}M.push(D);var H=0;var y=b();console.log("project:");console.log(y);for(var L in y){H=H+y[L].score;if(y[L].score<0){B.push(y[L].message)}}M.push(H);E.score=M;E.message=B;return E};return f};$("#resume-tool .tool-diagnose").click(function(){if($("body").data("cover")=="show"){$("html,body").animate({scrollTop:"1345px"},500)}var b='<div class="diagnose-progress"></div><div style="float:left;width:100%;text-align:center;"><div class="diagnose-info">简历写完了？给简历做个智能诊断吧</div></div><fieldset><legend>诊断建议</legend><ul></ul></fieldset>';var c=$.popup({title:"智能诊断",content:b,width:"300px",side:"left",id:"diagnose-panel"});if(!c){return false}var d=new ProgressBar.Circle(".diagnose-progress",{color:"#00A13C",strokeWidth:5,trailColor:"#D3E3F2",trailWidth:2,fill:"#FFF",text:{value:"开始诊断",className:"diagnose-btn",style:{color:"#fff"}}});c.off("click").on("click",".diagnose-btn",function(){if("开始诊断"!=$(this).text()){return false}a()});c.on("click",".layui-btn",function(){d.animate(0,{duration:300});d.setText("正在诊断");d.text.setAttribute("class","diagnose-btn");d.text.setAttribute("style","");$("fieldset ul").html("");$("fieldset").slideUp(100);$(".diagnose-info").text("简历写完了？快给简历做个智能诊断！");setTimeout(function(){a()},500)});function a(){d.setText("正在诊断");var k=$(".diagnose-btn");var f=setInterval(function(){if(-1!=k.css("box-shadow").indexOf("8px")){k.css("box-shadow","0 0 10px #175199")}else{k.css("box-shadow","0 0 8px #38a3db")}},300);d.animate(0.3,{duration:500});var e=getDiagnose().diagnose();var j=0,h="";for(var g in e.score){j+=e.score[g]}if(e.message.length<1){h=""}else{for(var g in e.message){h+=("<li>"+e.message[g]+"</li>")}}setTimeout(function(){d.animate(0.6,{duration:1000})},1000);setTimeout(function(){d.animate(1,{duration:3000},function(){clearInterval(f);var l="#FF5722";var i="简历暂未达标，童鞋仍需努力";if(j>50&&j<75){l="#333";i="简历已初具水准，还需再接再厉"}else{if(j>=75){l="#1E9FFF";i="简历已趋近完美，赶紧投递新工作吧"}}d.setText('<span class="score" style="color:'+l+';">'+j+'</span><br/><span class="layui-btn layui-btn-normal layui-btn-xs">重新诊断</span>');d.text.setAttribute("class","diagnose-over");d.text.setAttribute("style","");$(".diagnose-info").text(i);if(h){$("fieldset ul").html(h);$("fieldset").slideDown(500)}})},2500)}});