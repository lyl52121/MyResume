var context={fontsize:$("#field-list").attr("fontsize")||"15px",fontcolor:$("#field-list").attr("fontcolor")||"666666",fontfamily:$("#field-list").attr("fontfamily")||"Helvetica Neue",linespace:$("#field-list").attr("linespace")||"1.6em",blockspace:$("#field-list").attr("blockspace")||"20px",resumeMd5:null,autoSaveHandle:null,hasSavedToServer:true,savedToServerFirst:false,savedToServerAuto:false,savedToServer:function(a){if(!context.user){layer.msg("请先登录");return false}if("boolean"!==typeof a){layer.msg("保存失败");return false}if(a){if(!this.hasSavedToServer){layer.close(resumeUnSaveTips);$(".resume-status").hide();this.hasSavedToServer=true;this.savedToServerAuto=false;$("#content .editable").each(function(){$(this).removeData("data-his");$(this).removeData("data-hised")})}}else{if(this.hasSavedToServer){if($("#operate-save").size()>0){resumeUnSaveTips=layer.tips('<font color="red">*</font> 简历有修改',$("#operate-save"),{tips:[3,"#FFB800"],time:0,fixed:true,tipsMore:true})}$(".resume-status").show();$(".resume-autosave").hide();this.hasSavedToServer=false}if(this.autoSaveHandle){clearTimeout(this.autoSaveHandle)}this.autoSaveHandle=setTimeout(function(){if(!context.hasSavedToServer&&"editor"!=context.page){context.savedToServerAuto=true;$("#operate-save").click();$(".resume-autosave").show()}},1*60*1000)}},historyBakArr:[],historyBak:function(a){a.time=this.now();a.cancel=false;this.historyBakArr.push(a);historyPanelRender();$("#resume-his span.layui-badge").text(this.historyBakArr.length).show()},print:function(b,a){if(window.opera){this.createPrintWindow(b,a);return}this.gPrintFrame=this.createPrintIframe(b,a);var c=this;this.gPrintFrame.onload=function(){c.gPrintFrame.contentWindow.focus();c.gPrintFrame.contentWindow.print()}},gPrintFrame:null,createPrintIframe:function(content,style){var iframe=document.getElementById("print-iframe");if(!iframe){iframe=document.createElement("iframe");iframe.id="print-iframe";with(iframe.style){position="absolute";left="-10000px";top="-10000px"}document.body.appendChild(iframe)}var html="";html+="<!DOCTYPE html><html><head>";html+=style;html+="</head><body>";html+=content;html+="</body></html>";var doc=iframe.contentWindow.document;doc.open();doc.write(html);doc.close();return iframe},createPrintWindow:function(c,b){var e=window.open("");var a="";a+="<!DOCTYPE html><html><head>";a+=b;a+='</head><body onload="window.print(); window.opener=self; self.close();">';a+=c;a+="</body></html>";var d=e.document;d.open();d.write(a);d.close();return e},now:function(){var b=new Date();var e=b.getFullYear();var f=b.getMonth()+1<10?"0"+(b.getMonth()+1):b.getMonth()+1;var d=b.getDate()<10?"0"+b.getDate():b.getDate();var a=b.getHours()<10?"0"+b.getHours():b.getHours();var g=b.getMinutes()<10?"0"+b.getMinutes():b.getMinutes();var c=b.getSeconds()<10?"0"+b.getSeconds():b.getSeconds();return a+":"+g+":"+c},cookie:{set:function(c,d,a){var b=new Date();b.setTime(b.getTime()+a*24*3600*1000);document.cookie=c+"="+d+((a==null)?"":";expires="+b.toGMTString())+";path=/"},get:function(e){var c=document.cookie.replace(/[ ]/g,"");var f=c.split(";");var b;for(var d=0;d<f.length;d++){var a=f[d].split("=");if(e==a[0]){b=a[1];break}}return b},del:function(b){var a=new Date();a.setTime(a.getTime()-10000);document.cookie=b+"=v;expires="+a.toGMTString()}},blocktitle:{zh:{baseinfo:"基本信息",intention:"求职意向",education:"教育背景",work:"工作经历",practice:"实践经历",project:"项目经历",honer:"荣誉奖项",hobby:"兴趣爱好",skill:"专业技能",evaluation:"自我评价"},en:{baseinfo:"Summary",intention:"Intention",education:"Education",work:"Careers",practice:"Practices",project:"Projects",honer:"Honors",hobby:"Hobbies",skill:"Skills",evaluation:"Evaluation"}},skilllevel:{zh:{average:"了解",good:"掌握",advanced:"熟练",expert:"精通"},en:{average:"Average",good:"Good",advanced:"Advanced",expert:"Expert"}},trace:function(b){if(b&&("undefined"!=typeof _hmt)){var a=b.split("-");if(a.length>=3){console.log("trace=>"+b);_hmt.push(["_trackEvent",a[0],a[1],a[2]])}}},pv:function(a){if(a&&("undefined"!=typeof _hmt)){console.log("pv=>"+a);_hmt.push(["_trackPageview",a])}},err:function(a){$.get(context.host+"common/errorlog",{msg:a},function(b){})}};$("body").on("click",".jlb-login-link",function(){if($(this).attr("data-uid")){location.href=context.host+"profile";return false}var a='<div style="text-align:center;margin-top:40px;">';a+='<a href="'+context.host+"account/wxlogin?redirect="+location.href+'" rel="nofollow" data-trace="common-login-wxlogin" onclick="context.pv(\'/account/wxlogin\');" style="width:64px;height:64px;background:url('+context.res+'images/login_icons.png) 64px -80px;display:inline-block;position:relative;"><span style="position:absolute;bottom:-22px;display:inline-block;left:10px;font-size:12px;">微信登录</span></a> ';a+='<a href="'+context.host+"account/wblogin?redirect="+location.href+'" rel="nofollow" data-trace="common-login-wblogin" onclick="context.pv(\'/account/wblogin\');" style="width:64px;height:64px;background:url('+context.res+'images/login_icons.png) 0px -80px;display:inline-block;position:relative;margin:0px 40px;"><span style="position:absolute;bottom:-22px;display:inline-block;left:10px;font-size:12px;">微博登录</span></a> ';a+='<a  href="'+context.host+"account/qqlogin?redirect="+location.href+'" rel="nofollow" data-trace="common-login-qqlogin" onclick="context.pv(\'/account/qqlogin\');" style="width:64px;height:64px;background:url('+context.res+'images/login_icons.png) -80px -80px;display:inline-block;position:relative;"><span style="position:absolute;bottom:-22px;display:inline-block;left:13px;font-size:12px;">QQ登录</span></a></div>';layer.open({type:1,title:"登录",content:a,area:["420px","270px"],shade:0.7,shadeClose:true,success:function(c,b){c.find("a").on("mouseenter",function(){$(this).css("opacity","0.7")}).on("mouseleave",function(){$(this).css("opacity","")})}});context.trace("common-login-loginopen")});$("body").on("click","#vip-btn, #vip-link, #jlb-vip-btn",function(){if(!context.user){layer.msg("请先登录");return false}if("life"==context.vip){layer.msg("您已是超级VIP");return false}layer.open({type:1,title:"升级VIP",content:$("#vip-panel"),shadeClose:true,area:["870px","670px"],success:function(b,a){context.pv("/vip/vipopen")},});if(/MicroMessenger/.test(navigator.userAgent)){$('#vip-panel form[name="vipForm"]').attr("method","get")}});$("#vip-panel .vip-box-btn .pay-btn-ali").click(function(){layer.closeAll();layer.open({type:1,title:false,closeBtn:false,area:"300px",shade:0.7,resize:false,btn:["支付完成"],btnAlign:"c",content:'<p style="text-align:center;">支付成功后可在<a href="'+context.host+'profile#order" style="color:#1e9fff;text-decoration:underline;">个人中心</a>查看支付记录</p>',success:function(b,a){context.pv("/vip/vipalipay")},yes:function(){context.pv("/vip/vipalipaysucc");location.reload()}});$('#vip-panel form[name="vipForm"]').submit()});$("#vip-panel .vip-box-btn .pay-btn-wx").click(function(){var c="";var e="";var d=layer.open({type:1,title:"微信支付",content:"",shadeClose:true,btnAlign:"c",area:["400px","330px"],success:function(g,f){g.find(".layui-layer-title").css("border-bottom","none");g.find(".layui-layer-content").css("background","url("+context.res+"lib/layui/css/modules/layer/default/loading-0.gif) center 110px no-repeat");$.ajax({type:"post",url:"/payment/wxpay",data:$('#vip-panel form[name="vipForm"]').serialize(),async:true,dataType:"json",success:function(i){g.find(".layui-layer-content").css("background","");if(i.retCode==0){c=i.data.qr;e=i.data.order_id;var h='<img style="width:200px;height:200px;display:block;margin:0 auto;" src="'+c+'"></img><p style="text-align:center;margin-top:10px;">打开微信扫描二维码支付：￥<font color="#f60"><b>'+i.data.amount+"</b></font></p>";g.find(".layui-layer-content").html(h)}else{layer.msg(i.retText);setTimeout(function(){layer.close(f);clearInterval(b)},1000)}}});context.pv("/vip/vipwxpay")},end:function(f,g){clearInterval(b)}});var a=0;var b=setInterval(function(){a++;$.ajax({type:"post",url:"/payment/queryorderstate",data:{order_id:e},async:false,dataType:"json",success:function(f){if(f.retCode==0){clearInterval(b);layer.msg("支付成功，页面刷新后生效",{time:0,btn:["立即刷新"],btnAlign:"c",shade:0.5,btn1:function(g,h){layer.close(g);location.reload()}})}}});if(a>100){clearInterval(b);layer.msg("二维码已经过期，请重新支付",{time:0,btn:["知道了"],btnAlign:"c",shade:0.5,btn1:function(f,g){layer.close(f);layer.close(d)}})}},1500)});var vip={vip1:{price:"9.9",amount:"9.9",pdf:"每天30次",word:"每天20次",mail:"每天20次"},vip3:{price:"5.3",amount:"15.9",pdf:"每天30次",word:"每天20次",mail:"每天20次"},vip6:{price:"3.4",amount:"19.9",pdf:"每天30次",word:"每天20次",mail:"每天20次"},vip12:{price:"2.5",amount:"29.9",pdf:"每天30次",word:"每天20次",mail:"每天20次"}};$("#vip-month .vip-time .layui-btn").click(function(){context.pv("/vip/viptime");var b=$(this).attr("value");var a=$(this).attr("expire");$(this).parent().parent().find(".vip-price font").text(vip["vip"+b]["price"]);$(this).parent().parent().find("font.vip-pdfnum").text(vip["vip"+b]["pdf"]);$(this).parent().parent().find("font.vip-wordnum").text(vip["vip"+b]["word"]);$(".vip-box-amount font b").text(vip["vip"+b]["amount"]);$('.vip-box-amount font[color="#666"]').text("（"+a+"到期）");$('#vip-panel input[name="amount"]').val(vip["vip"+b]["amount"]);$('#vip-panel input[name="title"]').val("简历本基础VIP会员");$('#vip-panel input[name="itemId"]').val("vip-month");$('#vip-panel input[name="time"]').val(b);$("#vip-month .vip-time .layui-btn").removeClass("checked");$(this).addClass("checked")});$("#vip-panel .vip-item").click(function(){if($(this).attr("id")=="common-user"){return false}$("#vip-panel .vip-item").removeClass("vip-item-curr");$(this).addClass("vip-item-curr");var a=$(this).attr("id");if("vip-month"==a){var c=$("#vip-month .vip-time .layui-btn.checked").attr("value");var b=$("#vip-month .vip-time .layui-btn.checked").attr("expire");var d=vip["vip"+c]["amount"];$("#vip-panel .vip-box-amount").html('合计金额：<font size="5" color="#f60"><b>'+d+'</b></font> 元<font color="#666">（'+b+"到期）</font>");$('#vip-panel input[name="amount"]').val(d);$('#vip-panel input[name="title"]').val("简历本基础VIP会员");$('#vip-panel input[name="itemId"]').val("vip-month")}if("vip-life"==a){context.pv("/vip/viplife");$("#vip-panel .vip-box-amount").html('合计金额：<font size="5" color="#f60"><b>39.9</b></font> 元<font color="#666">（永久有效）</font>');$('#vip-panel input[name="amount"]').val(39.9);$('#vip-panel input[name="title"]').val("简历本超级VIP会员");$('#vip-panel input[name="itemId"]').val("vip-life")}});if(layui.device().ie||/Edge/.test(navigator.userAgent)){var _browserName="Edge";if(layui.device().ie){_browserName="IE"}else{if(/Edge/.test(navigator.userAgent)){_browserName="Edge"}}layui.use("layer",function(){if(layui.device().ie&&layui.device().ie<9){layui.use("layer",function(){layer.alert("您正在使用低版本IE浏览器，将会影响简历本的操作体验，强烈建议使用Chrome、Firefox、360等更优秀的浏览器！",{title:"提示",closeBtn:false,shade:0.7},function(){location.href=context.host+"error/ie"})})}else{layer.confirm("您正在使用"+_browserName+"浏览器，Windows系统自带的IE浏览器和Edge浏览器经常存在不可描述的问题，强烈建议使用Chrome、Firefox、360等更优秀的浏览器！",{title:"提示",btn:["更换浏览器","继续使用"],closeBtn:false,shade:0.7},function(){location.href=context.host+"error/ie"})}})}layui.use("util",function(){layui.util.fixbar({bar1:"&#xe642;",bgcolor:"#AAA",click:function(a){if(a==="bar1"){window.open("/feedback")}}})});$("body").on("click",".jlb-search",function(){var a=$(this).prev().val();if(!a){layer.msg("请输入搜索内容");return false}window.open("http://zhannei.baidu.com/cse/search?s=12824040485760848050&q="+a);$.get(context.host+"common/searchlog",{kw:a,page:location.href},function(b){});context.trace("common-search-search")});$("body").on("keyup",'input[name="search-input"]',function(a){var b=a||window.event;if(b.keyCode==13){$(".jlb-search").click()}});$("body").on("mousedown","*[data-trace]",function(){context.trace($(this).attr("data-trace"))});$("body").on("click",".jlb-btn-create",function(){var d=$(this).attr("tplkey")||context.tplkey;var b=!$(this).attr("tplcon")?"":("&c="+$(this).attr("tplcon"));var c=-1!=location.href.indexOf("english")||$(this).attr("tpllang")?"&l=en":"";var a=context.host+"editor/?t="+d+b+c;if($(this).attr("covid")){a=a+"#cover"}location.href=a});$(".mycv-link").click(function(){if(context.user){location.href=context.host+"profile"}else{$(".jlb-login-link").click()}});$(".jlb-friendlinks-more").toggle(function(){$(this).parent().css("height","auto");$(this).html("收起▴")},function(){$(this).parent().css("height","45px");$(this).html("展开▾")});